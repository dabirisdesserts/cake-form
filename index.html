<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dabiri's Desserts - Order Form - UPDATED</title>
    <!-- Force Vercel redeploy - v2 -->
    <meta name="deployment" content="v2">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #E8C7FF 0%, #D9B3FF 50%, #C297FF 100%);
            background-attachment: fixed;
            min-height: 100vh;
            height: auto;
            padding: 20px 20px 150px 20px;
            line-height: 1.6;
            overflow-x: hidden;
            overflow-y: scroll;
            max-width: 100%;
        }

        .container {
            max-width: 90%;
            margin: 0 auto;
            background: white;
            border-radius: 2%;
            box-shadow: 0 2% 4% rgba(0,0,0,0.1);
            min-height: auto;
            height: auto;
            max-height: none;
            width: 100%;
            position: relative;
            overflow: visible;
        }

        /* Improved responsive container */
        @media (max-width: 1200px) {
            .container {
                max-width: 95%;
            }
        }

        @media (max-width: 768px) {
            .container {
                max-width: 98%;
                margin: 0 1%;
            }
        }

        .header {
            background: url('./logo_background.png') center/cover;
            color: white;
            padding: 4%;
            text-align: center;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="60" r="2.5" fill="rgba(255,255,255,0.1)"/><circle cx="70" cy="80" r="1" fill="rgba(255,255,255,0.1)"/></svg>');
            pointer-events: none;
        }

        .logo {
            max-width: 40%;
            margin: 0 auto 2%;
            background: white;
            border-radius: 2%;
            padding: 2%;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0.5% 1.5% rgba(0,0,0,0.1);
        }

        .logo-svg {
            width: 100%;
            height: auto;
            max-height: 120px;
            object-fit: contain;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .form-container {
            padding: 4%;
            overflow-x: hidden;
        }

        /* Better responsive container handling */
        @media (max-width: 1200px) {
            .form-container {
                padding: 3%;
            }
        }

        @media (max-width: 768px) {
            .form-container {
                padding: 2%;
            }
        }

        .form-section {
            margin-bottom: 4%;
            background: #f8f9fa;
            border-radius: 2%;
            padding: 3%;
            border: 2px solid #E8C7FF;
            position: relative;
            width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        /* Better responsive form sections */
        @media (max-width: 1200px) {
            .form-section {
                padding: 2.5%;
                margin-bottom: 3%;
            }
        }

        @media (max-width: 768px) {
            .form-section {
                padding: 2%;
                margin-bottom: 2%;
            }
        }

        .form-section h2 {
            color: #7D5577;
            margin-bottom: 25px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            user-select: none;
        }

        .section-content {
            overflow: visible;
        }

        .required {
            color: #e74c3c !important;
            font-weight: bold !important;
            font-size: 1.5em !important;
            margin-left: 3px !important;
            display: inline !important;
            visibility: visible !important;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* Additional fallback for required asterisks */
        label .required,
        h2 .required,
        h3 .required {
            color: #e74c3c !important;
            font-weight: bold !important;
            font-size: 1.5em !important;
            display: inline !important;
            visibility: visible !important;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2%;
            margin-bottom: 2%;
        }

        /* Responsive form row adjustments */
        @media (max-width: 1024px) {
            .form-row {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
                gap: 1.5%;
            }
        }

        .form-group {
            margin-bottom: 2%;
        }

        .form-group label {
            display: block;
            margin-bottom: 1%;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 1.5% 2%;
            border: 2px solid #e1e5e9;
            border-radius: 1%;
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #A0739C;
            box-shadow: 0 0 0 3px rgba(160, 115, 156, 0.1);
        }

        .product-card {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 1.5%;
            padding: 2%;
            margin-bottom: 3%;
            transition: all 0.3s ease;
            position: relative;
            min-height: auto;
            overflow: visible;
            width: 100%;
            box-sizing: border-box;
        }

        /* Better responsive product cards */
        @media (max-width: 1200px) {
            .product-card {
                padding: 1.5%;
                margin-bottom: 2%;
            }
        }

        @media (max-width: 768px) {
            .product-card {
                padding: 1%;
                margin-bottom: 1.5%;
            }
        }

        .product-card:hover {
            border-color: #A0739C;
            box-shadow: 0 5px 15px rgba(160, 115, 156, 0.1);
        }

        .product-card.selected {
            border-color: #A0739C;
            background: #f8f3ff;
            box-shadow: 0 5px 15px rgba(160, 115, 156, 0.2);
        }

        .product-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .product-checkbox {
            margin-right: 15px;
            transform: scale(1.2);
            accent-color: #A0739C;
        }

        .product-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            flex: 1;
        }

        .product-price {
            font-size: 1.4em;
            font-weight: bold;
            color: #A0739C;
        }

        .product-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .flavor-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        /* Override for vintage cake - stack rows vertically */
        .vintage-flavor-options {
            display: block !important;
            grid-template-columns: none !important;
            gap: 0 !important;
            margin-top: 0;
        }

        /* Cake decoration images */
        .cake-decoration-img {
            max-width: 300px;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(125, 85, 119, 0.3);
            transition: transform 0.3s ease;
        }

        .cake-decoration-img:hover {
            transform: scale(1.05);
        }

        .flavor-row {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .flavor-label {
            min-width: 100px;
            font-weight: 500;
            color: #2c3e50;
        }

        .quantity-input {
            width: 80px !important;
            text-align: center;
        }

        .dropdown-options {
            position: relative;
        }

        .dropdown-toggle {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: border-color 0.3s ease;
        }

        .dropdown-toggle:hover {
            border-color: #A0739C;
        }

        .dropdown-toggle::after {
            content: 'â–¼';
            font-size: 0.8em;
            transition: transform 0.3s ease;
        }

        .dropdown-toggle.active::after {
            transform: rotate(180deg);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e1e5e9;
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-height: 200px;
            overflow-y: auto;
            z-index: 100;
            display: none;
        }

        .dropdown-menu.show {
            display: block;
        }

        .dropdown-option {
            padding: 12px 15px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .dropdown-option:hover {
            background: #f8f3ff;
        }

        .dropdown-option.selected {
            background: #A0739C;
            color: white;
        }

        .file-upload-area {
            border: 2px dashed #A0739C;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f3ff;
            margin: 20px 0;
        }

        .file-upload-area:hover {
            border-color: #7D5577;
            background: #f0e6ff;
        }

        .file-upload-area.dragover {
            border-color: #7D5577;
            background: #e8d9ff;
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3em;
            color: #A0739C;
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 1.1em;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .upload-hint {
            font-size: 0.9em;
            color: #666;
        }

        .uploaded-files {
            margin-top: 15px;
        }

        .uploaded-file {
            display: flex;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .file-icon {
            margin-right: 10px;
            color: #A0739C;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 500;
            color: #2c3e50;
        }

        .file-size {
            font-size: 0.9em;
            color: #666;
        }

        .remove-file {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .policy-section {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .policy-title {
            color: #856404;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .policy-text {
            color: #856404;
            line-height: 1.6;
        }

        .total-section {
            background: url('./logo_background.png') center/cover;
            color: white;
            padding: 3%;
            border-radius: 2%;
            text-align: center;
            margin: 3% 0;
            box-shadow: 0 1% 2.5% rgba(155, 89, 182, 0.3);
        }

        .total-title {
            font-size: 1.5em;
            margin-bottom: 1.5%;
        }

        .total-amount {
            font-size: 3em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .submit-btn {
            width: 100%;
            padding: 2%;
            background: linear-gradient(135deg, #A0739C 0%, #7D5577 100%);
            color: white;
            border: none;
            border-radius: 1.5%;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 0.5% 1.5% rgba(155, 89, 182, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-0.2%);
            box-shadow: 0 1% 2.5% rgba(155, 89, 182, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .submit-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .submit-btn.validation-error {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .error-message {
            color: #e74c3c;
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: none;
            border: 2px solid #c3e6cb;
        }

        .brand-info {
            text-align: center;
            padding: 30px;
            background: #f8f3ff;
            margin: 20px 0;
            border-radius: 15px;
        }

        .brand-description {
            font-size: 1.1em;
            line-height: 1.8;
            color: #2c3e50;
            max-width: 800px;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .form-container {
                padding: 2%;
                margin: 1%;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 2%;
            }

            .product-details {
                grid-template-columns: 1fr;
            }

            .flavor-options {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }

            .total-amount {
                font-size: 2.5em;
            }

            /* Mobile-specific improvements */
            .form-section {
                margin: 2% 0;
                padding: 2%;
            }

            .form-section h2 {
                font-size: 1.3em;
                margin-bottom: 2%;
            }

            .form-group {
                margin-bottom: 2%;
            }

            .form-group input,
            .form-group textarea,
            .form-group select {
                padding: 1.5%;
                font-size: 16px; /* Prevents zoom on iOS */
            }

            .product-card {
                margin: 1.5% 0;
                padding: 2%;
            }

            .product-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5%;
            }

            .product-title {
                font-size: 1.1em;
            }

            .product-price {
                font-size: 1.2em;
            }

            /* Stack form inputs vertically on mobile */
            .form-row .form-group {
                width: 100%;
            }

            /* Make tables horizontally scrollable on mobile */
            .product-options {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                position: relative;
            }


            .vintage-cake-header,
            .flavor-row {
                min-width: 90vw; /* Use viewport width for better responsiveness */
                display: grid !important;
                grid-template-columns: 12% 8% 18% 18% 22% !important;
                gap: 1% !important;
            }

            .vintage-cake-header > div,
            .flavor-row > div {
                display: block;
                width: auto;
                margin-bottom: 0;
            }

            /* Make selects and inputs full width on mobile */
            .product-select,
            .quantity-input {
                width: 100% !important;
                margin: 0.5% 0 !important;
            }

            /* Improve spacing for mobile */
            .item-subtotal {
                margin-top: 2% !important;
                text-align: center !important;
            }

            /* Better mobile typography */
            .policy-text {
                font-size: 0.9em;
                line-height: 1.5;
            }

            .total-section {
                padding: 3% 2%;
                margin: 3% 0;
            }

            .submit-btn {
                padding: 2%;
                font-size: 1.1em;
            }
        }

        .category-filter {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 20px;
        }

        .category-select {
            padding: 10px 15px;
            border: 2px solid #A0739C;
            border-radius: 8px;
            background: white;
            color: #2c3e50;
            font-weight: 500;
            cursor: pointer;
        }

        .red-required {
            color: red;
            font-size: 0.9em;
            margin-top: 5px;
            display: block;
        }

        .product-options {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #e1e5e9;
            margin-bottom: 20px;
            min-height: auto;
            overflow: visible;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .option-column {
            display: flex;
            flex-direction: column;
        }

        .size-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .size-row {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
        }

        .size-row label {
            min-width: 30px;
            font-weight: 500;
            color: #2c3e50;
            margin: 0;
        }

        .product-select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 6px;
            background: white;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .product-select:focus {
            outline: none;
            border-color: #A0739C;
            box-shadow: 0 0 0 2px rgba(160, 115, 156, 0.1);
        }

        .item-subtotal {
            border-top: 2px solid #e1e5e9;
            padding-top: 15px;
            text-align: right;
            margin-top: 20px;
            font-size: 1.1em;
        }

        .item-subtotal span {
            color: #333 !important;
            font-weight: 500;
        }

        .subtotal-amount {
            color: #A0739C;
            font-size: 1.2em;
        }

        .cake-options-table {
            background: white;
            border-radius: 8px;
            border: 2px solid #e1e5e9;
            overflow-x: auto;
            overflow-y: visible;
            -webkit-overflow-scrolling: touch;
            width: 100%;
            max-width: 100%;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Better horizontal scrolling for tables */
        .cake-options-table::-webkit-scrollbar {
            height: 8px;
        }

        .cake-options-table::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .cake-options-table::-webkit-scrollbar-thumb {
            background: #A0739C;
            border-radius: 4px;
        }

        .cake-options-table::-webkit-scrollbar-thumb:hover {
            background: #7D5577;
        }

        .table-header {
            display: grid;
            grid-template-columns: 80px 60px 120px 140px 140px 180px 140px 80px;
            background: #f8f9fa;
            border-bottom: 2px solid #e1e5e9;
            font-weight: bold;
            color: #2c3e50;
            min-width: 840px;
        }

        .table-row {
            display: grid;
            grid-template-columns: 80px 60px 120px 140px 140px 180px 140px 80px;
            align-items: center;
            min-height: 50px;
            min-width: 840px;
        }

        /* Improved responsive design for different screen sizes */
        @media (max-width: 1400px) and (min-width: 1025px) {
            .table-header,
            .table-row {
                grid-template-columns: 70px 50px 110px 130px 130px 160px 130px 70px;
                min-width: 750px;
                font-size: 14px;
            }

            .table-header > div,
            .table-row > div {
                padding: 10px 6px;
            }
        }

        @media (max-width: 1200px) and (min-width: 901px) {
            .table-header,
            .table-row {
                grid-template-columns: 60px 45px 100px 120px 120px 140px 120px 60px;
                min-width: 665px;
                font-size: 13px;
            }

            .table-header > div,
            .table-row > div {
                padding: 8px 4px;
            }
        }

        @media (max-width: 900px) and (min-width: 769px) {
            .table-header,
            .table-row {
                grid-template-columns: 50px 40px 90px 110px 110px 120px 110px 50px;
                min-width: 580px;
                font-size: 12px;
            }

            .table-header > div,
            .table-row > div {
                padding: 6px 3px;
            }
        }

        .table-header > div,
        .table-row > div {
            padding: 12px 8px;
            border-right: 1px solid #e1e5e9;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .table-header > div:last-child,
        .table-row > div:last-child {
            border-right: none;
        }

        .col-size select,
        .col-qty input,
        .col-flavor select,
        .col-filling select,
        .col-border select,
        .col-addons select,
        .col-text select {
            width: 100%;
            padding: 6px;
            border: 1px solid #e1e5e9;
            border-radius: 4px;
            font-size: 12px;
        }

        .col-qty input {
            text-align: center;
            max-width: 50px;
        }

        .col-price {
            font-weight: bold;
            color: #A0739C;
        }

        @media (max-width: 1024px) and (min-width: 769px) {
            .table-header,
            .table-row {
                grid-template-columns: 50px 40px 90px 110px 110px 130px 110px 60px;
                font-size: 12px;
                min-width: 600px;
            }

            .table-header > div,
            .table-row > div {
                padding: 8px 4px;
            }
        }

        .cupcake-options-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #e1e5e9;
            min-height: auto;
            height: auto;
            max-height: none;
            overflow: visible;
        }

        .flavors-section,
        .addons-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e1e5e9;
        }

        .flavor-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .flavor-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
        }

        .flavor-item label {
            font-weight: 500;
            color: #2c3e50;
            margin: 0;
        }

        .flavor-item input {
            width: 80px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            font-size: 14px;
        }

        .addon-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #A0739C;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }

        @media (max-width: 768px) {
            .cupcake-options-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        /* Ensure all content is visible and scrollable */
        html {
            overflow-x: hidden;
            overflow-y: scroll;
            height: auto;
            min-height: 100vh;
            max-height: none;
        }

        .form-container {
            min-height: auto;
            height: auto;
            overflow: visible;
        }

        .category-content {
            overflow: visible;
            min-height: auto;
            height: auto;
        }

        /* Ensure product options expand properly */
        .product-options {
            position: relative;
            z-index: 1;
        }

        /* Add extra space at bottom of form */
        form {
            padding-bottom: 200px;
            min-height: auto;
            height: auto;
            max-height: none;
            overflow: visible;
        }

        /* Ensure no viewport restrictions */
        * {
            max-height: none !important;
        }

        /* Special handling for expanded product options */
        .product-card.selected {
            margin-bottom: 40px;
            position: relative;
            z-index: 10;
        }

        .product-card.selected .product-options {
            margin-bottom: 30px;
            position: relative;
            z-index: 10;
        }

        /* Prevent overlap on mobile */
        @media (max-width: 768px) {
            .product-card {
                margin-bottom: 20px;
                position: relative;
                z-index: 1;
            }

            .product-card.selected {
                margin-bottom: 60px;
                z-index: 20;
            }

            .product-card.selected .product-options {
                margin-bottom: 40px;
                z-index: 20;
            }

            /* Ensure proper spacing between cards */
            .product-card + .product-card {
                margin-top: 20px;
            }
        }

        /* Force scroll behavior for long content */
        body, html {
            scroll-behavior: smooth;
        }

        /* Prevent any element from being clipped */
        .cake-options-table,
        .options-grid,
        .flavor-list,
        .flavor-item {
            overflow: visible !important;
            height: auto !important;
            max-height: none !important;
        }

        /* Vintage cake layout */
        .vintage-cake-header {
            background: #f8f9fa;
            border-radius: 8px 8px 0 0;
            padding: 15px 10px 10px 10px;
        }

        .flavor-options .flavor-row {
            display: grid;
            grid-template-columns: 100px 70px 120px 120px 150px;
            gap: 8px;
            align-items: center;
            padding: 12px 8px;
            border-bottom: 1px solid #f0f0f0;
            background: white;
            margin-bottom: 2px;
        }

        .flavor-options .flavor-row:last-child {
            border-bottom: none;
            border-radius: 0 0 8px 8px;
        }

        /* Additional mobile adjustments for specific elements */
        @media (max-width: 768px) {
            /* Make vintage cake options vertical like regular cakes */
            .vintage-flavor-options {
                margin: 0;
                border-radius: 8px;
                border: 1px solid #e1e5e9;
                width: 100%;
                background: white;
                overflow: visible;
            }

            /* Hide the vintage cake header on mobile */
            .vintage-cake-header {
                display: none !important;
            }

            .vintage-flavor-options .flavor-row {
                display: block !important;
                padding: 20px !important;
                background: white !important;
                margin-bottom: 15px !important;
                border-radius: 10px !important;
                border: 2px solid #e1e5e9 !important;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important;
                min-height: auto !important;
                min-width: auto !important;
                grid-template-columns: none !important;
                gap: 0 !important;
            }

            .vintage-flavor-options .flavor-row:last-child {
                margin-bottom: 0 !important;
            }

            .vintage-flavor-options .flavor-row > * {
                width: 100% !important;
                padding: 0 !important;
                border-right: none !important;
                display: block !important;
                margin: 10px 0 !important;
            }

            /* Style existing labels and form elements properly */
            .vintage-flavor-options .flavor-label {
                font-weight: bold !important;
                color: #A0739C !important;
                font-size: 18px !important;
                margin-bottom: 15px !important;
                display: block !important;
                padding: 10px 0 !important;
                border-bottom: 2px solid #e1e5e9 !important;
                text-align: center !important;
            }

            .vintage-flavor-options .quantity-input {
                width: 100% !important;
                padding: 12px !important;
                font-size: 16px !important;
                border: 2px solid #e1e5e9 !important;
                border-radius: 8px !important;
                box-sizing: border-box !important;
                margin: 10px 0 !important;
                background: white !important;
                display: block !important;
            }

            .vintage-flavor-options .product-select {
                width: 100% !important;
                padding: 12px !important;
                font-size: 16px !important;
                border: 2px solid #e1e5e9 !important;
                border-radius: 8px !important;
                box-sizing: border-box !important;
                margin: 10px 0 !important;
                background: white !important;
                display: block !important;
                color: #333 !important;
            }

            /* Add visible labels before form elements */
            .vintage-flavor-options .quantity-input::before {
                content: "Quantity:";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                display: block;
                margin-bottom: 8px;
            }

            .vintage-flavor-options .product-select[data-addon-type="filling"]::before {
                content: "Filling:";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                display: block;
                margin-bottom: 8px;
            }

            .vintage-flavor-options .product-select[data-addon-type="border"]::before {
                content: "Border:";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                display: block;
                margin-bottom: 8px;
            }

            .vintage-flavor-options .product-select[data-addon-type="addons"]::before {
                content: "Add-Ons:";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                display: block;
                margin-bottom: 8px;
            }

            /* Better mobile layout for regular flavor options */
            .flavor-options {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                position: relative;
            }


            .flavor-options .flavor-row {
                display: grid !important;
                grid-template-columns: 1fr 80px !important;
                gap: 10px !important;
                margin-bottom: 10px;
                padding: 8px;
                border: 1px solid #e1e5e9;
                border-radius: 8px;
                min-width: 200px;
            }

            .flavor-options .flavor-row > div {
                display: flex;
                align-items: center;
                width: auto;
            }

            .flavor-options .flavor-label {
                flex: 1;
                margin-right: 10px;
                font-size: 0.9em;
            }

            .flavor-options .quantity-input {
                width: 60px !important;
                margin: 0 !important;
                font-size: 0.9em;
            }

            /* Improve contrast for size values and subtotals */
            .col-size,
            .size-label,
            .item-subtotal,
            .subtotal-text {
                color: #333 !important;
                font-weight: 600 !important;
                text-shadow: none !important;
                background-color: transparent !important;
            }

            /* Force size text to be dark and visible */
            .col-size {
                color: #2c3e50 !important;
                font-weight: 700 !important;
                font-size: 16px !important;
                text-shadow: 0 1px 2px rgba(0,0,0,0.1) !important;
            }
            
            /* Dark mode specific styling for size text */
            [data-theme="dark"] .col-size {
                color: #ffffff !important;
                font-weight: 700 !important;
                font-size: 16px !important;
                text-shadow: 0 1px 2px rgba(0,0,0,0.5) !important;
            }

            /* Ensure table headers are visible */
            .table-header > div,
            .vintage-cake-header > div {
                color: #A0739C !important;
                font-weight: bold !important;
            }

            /* Improve contrast for form labels */
            .form-group label,
            .flavor-label {
                color: #333 !important;
                font-weight: 500 !important;
            }

            /* Vertical mobile layout for cake options */
            .cake-options-table {
                margin: 0;
                border-radius: 8px;
                border: 1px solid #e1e5e9;
                width: 100%;
                background: white;
                overflow: visible;
            }

            /* Hide the horizontal table headers on mobile */
            .cake-options-table .table-header {
                display: none;
            }

            /* Stack table rows vertically - use CSS Grid for better control */
            .cake-options-table .table-row {
                display: grid !important;
                grid-template-columns: 1fr !important;
                grid-template-rows: repeat(8, auto) !important;
                gap: 15px !important;
                padding: 20px !important;
                background: white !important;
                margin-bottom: 15px !important;
                border-radius: 10px !important;
                border: 2px solid #e1e5e9 !important;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important;
                align-items: stretch !important;
                min-height: auto !important;
                min-width: auto !important;
            }

            .cake-options-table .table-row:last-child {
                border-bottom: none !important;
                margin-bottom: 0 !important;
            }

            /* Ensure each column takes full width and stacks vertically */
            .cake-options-table .table-row > div {
                width: 100% !important;
                padding: 0 !important;
                border-right: none !important;
                display: flex !important;
                flex-direction: column !important;
                gap: 8px !important;
            }

            /* Create labels using CSS content */
            .cake-options-table .col-size::before {
                content: "Size";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                order: -1;
            }

            .cake-options-table .col-qty::before {
                content: "Quantity";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                order: -1;
            }

            .cake-options-table .col-flavor::before {
                content: "Flavor";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                order: -1;
            }

            .cake-options-table .col-filling::before {
                content: "Filling";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                order: -1;
            }

            .cake-options-table .col-border::before {
                content: "Border";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                order: -1;
            }

            .cake-options-table .col-addons::before {
                content: "Add-Ons";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                order: -1;
            }

            .cake-options-table .col-text::before {
                content: "Text";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                order: -1;
            }

            /* Style form controls */
            .cake-options-table .table-row select,
            .cake-options-table .table-row input[type="number"],
            .cake-options-table .table-row input[type="text"] {
                width: 100% !important;
                padding: 12px !important;
                font-size: 16px !important;
                border: 2px solid #e1e5e9 !important;
                border-radius: 8px !important;
                box-sizing: border-box !important;
                margin: 0 !important;
                background: white !important;
                display: block !important;
                max-width: none !important;
                min-width: auto !important;
            }

            .cake-options-table .table-row select:focus,
            .cake-options-table .table-row input:focus {
                border-color: #A0739C;
                outline: none;
                box-shadow: 0 0 0 3px rgba(160, 115, 156, 0.1);
            }

            /* Price display styling */
            .cake-options-table .col-price {
                font-weight: bold !important;
                color: #A0739C !important;
                font-size: 18px !important;
                text-align: center !important;
                padding: 12px !important;
                background: #f8f3ff !important;
                border-radius: 8px !important;
                border: 2px solid #e8d5f7 !important;
                display: flex !important;
                flex-direction: column !important;
                gap: 8px !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }

            .cake-options-table .col-price::before {
                content: "Subtotal";
                font-weight: bold;
                color: #A0739C;
                font-size: 14px;
                order: -1;
            }

            .product-options {
                position: relative;
                margin-bottom: 20px;
                width: 100%;
                padding: 15px;
                background: #f8f9fa;
                border-radius: 8px;
                box-sizing: border-box;
            }

            /* Additional mobile layout optimizations */
            .form-container {
                padding: 15px;
                margin: 10px;
                max-width: calc(100vw - 20px);
            }

            .product-card {
                margin: 15px 0;
                padding: 15px;
                border-radius: 12px;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                position: relative;
            }

            .product-header {
                margin-bottom: 15px;
            }

            .product-title {
                font-size: 1.2em;
                margin-bottom: 5px;
            }

            .product-price {
                font-size: 1.3em;
                font-weight: bold;
            }

            /* Ensure proper spacing for expanded options */
            .product-options {
                margin-top: 15px;
                padding: 15px;
                background: #f8f9fa;
                border-radius: 8px;
            }

            /* Better mobile form spacing */
            .form-section {
                margin: 20px 0;
                padding: 15px;
            }

            .form-section h2 {
                margin-bottom: 15px;
                font-size: 1.4em;
            }

            .form-group {
                margin-bottom: 15px;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 12px;
                font-size: 16px;
                border-radius: 8px;
            }
        }

        .flavor-options .flavor-row .flavor-label {
            font-weight: 500;
            color: #2c3e50;
        }

        .flavor-options .flavor-row .quantity-input {
            width: 100%;
            max-width: 70px;
            margin: 0;
        }

        .flavor-options .flavor-row .product-select {
            width: 100%;
            margin: 0 !important;
            font-size: 12px;
            padding: 6px;
        }

        /* Floating Action Buttons */
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            left: 0;
            right: 0;
            pointer-events: none;
            z-index: 1000;
        }

        .floating-btn {
            position: fixed;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 4px solid white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5), 0 0 0 2px rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
            pointer-events: auto;
            z-index: 1001;
        }

        .floating-btn:hover {
            transform: translateY(-4px) scale(1.1);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6), 0 0 0 3px rgba(255, 255, 255, 1);
        }

        .theme-toggle-btn {
            left: 30px;
            bottom: 30px;
            background: linear-gradient(135deg, #A0739C 0%, #7D5577 100%);
            color: white;
            opacity: 1;
            visibility: visible;
        }

        .translate-btn {
            left: 100px;
            bottom: 30px;
            background: linear-gradient(135deg, #A0739C 0%, #7D5577 100%);
            color: white;
            opacity: 1;
            visibility: visible;
        }

        .scroll-bottom-btn {
            right: 100px;
            bottom: 30px;
            background: linear-gradient(135deg, #7D5577 0%, #A0739C 100%);
            color: white;
            opacity: 1;
            visibility: visible;
            transition: all 0.3s ease;
        }

        .scroll-bottom-btn.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .scroll-top-btn {
            right: 30px;
            bottom: 30px;
            background: linear-gradient(135deg, #A0739C 0%, #7D5577 100%);
            color: white;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .scroll-top-btn.visible {
            opacity: 1;
            visibility: visible;
        }

        /* Dark Mode Styles */
        [data-theme="dark"] {
            --bg-primary: #2a1f2a;
            --bg-secondary: #3d2f3d;
            --bg-tertiary: #4a3a4a;
            --text-primary: #FCFCEC;
            --text-secondary: #FDF2D6;
            --text-muted: #835E84;
            --border-color: #6a5a6a;
            --border-strong: #7a6a7a;
            --shadow-color: rgba(131, 94, 132, 0.3);
            --accent-purple: #835E84;
            --accent-yellow: #FCFCEC;
            --accent-yellow-dark: #FDF2D6;
        }

        [data-theme="dark"] body {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        [data-theme="dark"] .container {
            background: var(--bg-primary);
        }

        [data-theme="dark"] .form-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
        }

        [data-theme="dark"] .form-section {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-strong);
            box-shadow: 0 4px 12px rgba(131, 94, 132, 0.2);
        }

        [data-theme="dark"] .form-section h2 {
            color: var(--accent-yellow);
        }

        [data-theme="dark"] .form-section h3 {
            color: var(--text-secondary);
        }

        [data-theme="dark"] .form-group input,
        [data-theme="dark"] .form-group textarea,
        [data-theme="dark"] .form-group select {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        [data-theme="dark"] .form-group input:focus,
        [data-theme="dark"] .form-group textarea:focus,
        [data-theme="dark"] .form-group select:focus {
            border-color: var(--accent-purple);
            box-shadow: 0 0 0 2px rgba(131, 94, 132, 0.3);
        }

        [data-theme="dark"] .product-card {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-strong);
            box-shadow: 0 2px 8px rgba(131, 94, 132, 0.15);
        }

        [data-theme="dark"] .product-title {
            color: var(--accent-yellow);
        }

        [data-theme="dark"] .product-price {
            color: var(--accent-purple);
        }

        [data-theme="dark"] .flavor-label {
            color: var(--text-secondary);
        }

        [data-theme="dark"] .quantity-input {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        [data-theme="dark"] .product-select {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        [data-theme="dark"] .policy-section {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-strong);
            box-shadow: 0 2px 8px rgba(131, 94, 132, 0.15);
        }

        [data-theme="dark"] .policy-text {
            color: var(--text-secondary);
        }

        [data-theme="dark"] .total-section {
            background: url('./logo_background.png') center/cover;
            color: white;
        }

        [data-theme="dark"] .submit-btn {
            background: linear-gradient(135deg, var(--accent-purple) 0%, #6a4a6a 100%);
            color: var(--accent-yellow);
        }

        [data-theme="dark"] .submit-btn:hover {
            background: linear-gradient(135deg, #9a6e9a 0%, #7a5a7a 100%);
            color: var(--accent-yellow);
        }

        [data-theme="dark"] .file-upload-area {
            background: var(--bg-secondary);
            border: 2px dashed var(--border-color);
            color: var(--text-secondary);
        }

        [data-theme="dark"] .file-upload-area:hover {
            border-color: var(--accent-purple);
            background: var(--bg-tertiary);
        }

        [data-theme="dark"] .uploaded-file {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        [data-theme="dark"] .category-select {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        [data-theme="dark"] .logo {
            background: white;
        }

        /* Additional Dark Mode Enhancements */
        [data-theme="dark"] .category-filter h4 {
            color: var(--accent-yellow);
        }

        [data-theme="dark"] .subtotal-amount {
            color: var(--accent-purple);
        }


        [data-theme="dark"] .vintage-cake-header {
            color: var(--accent-yellow);
            border-bottom-color: var(--border-color);
        }

        [data-theme="dark"] .required {
            color: #ff6b6b !important;
            font-weight: bold !important;
            font-size: 1.5em !important;
            display: inline !important;
            visibility: visible !important;
        }

        [data-theme="dark"] .policy-text a {
            color: var(--accent-yellow);
        }

        [data-theme="dark"] .policy-text a:hover {
            color: var(--accent-purple);
        }

        /* Dark mode overrides for inline styles */
        [data-theme="dark"] h3[style*="color: #7D5577"] {
            color: var(--accent-yellow) !important;
        }

        [data-theme="dark"] h4[style*="color: #7D5577"] {
            color: var(--accent-yellow) !important;
        }

        [data-theme="dark"] h4[style*="color: #A0739C"] {
            color: var(--accent-purple) !important;
        }

        [data-theme="dark"] div[style*="color: #666"] {
            color: var(--text-secondary) !important;
        }

        [data-theme="dark"] p[style*="color: #666"] {
            color: var(--text-secondary) !important;
        }

        [data-theme="dark"] .vintage-cake-header[style*="color: #A0739C"] {
            color: var(--accent-yellow) !important;
            border-bottom-color: var(--border-color) !important;
        }

        [data-theme="dark"] .error-message {
            color: #ff6b6b !important;
        }

        [data-theme="dark"] .success-message {
            background: rgba(131, 94, 132, 0.2) !important;
            color: var(--accent-yellow) !important;
            border: 1px solid var(--accent-purple) !important;
        }

        [data-theme="dark"] .form-group label {
            color: var(--accent-yellow) !important;
        }

        /* Fix dark mode text visibility in all input types */
        [data-theme="dark"] input[type="text"],
        [data-theme="dark"] input[type="email"],
        [data-theme="dark"] input[type="tel"],
        [data-theme="dark"] input[type="number"],
        [data-theme="dark"] input[type="date"],
        [data-theme="dark"] input[type="time"],
        [data-theme="dark"] textarea,
        [data-theme="dark"] select {
            background: var(--bg-secondary) !important;
            color: var(--text-primary) !important;
            border: 2px solid var(--border-color) !important;
        }

        [data-theme="dark"] input[type="text"]:focus,
        [data-theme="dark"] input[type="email"]:focus,
        [data-theme="dark"] input[type="tel"]:focus,
        [data-theme="dark"] input[type="number"]:focus,
        [data-theme="dark"] input[type="date"]:focus,
        [data-theme="dark"] input[type="time"]:focus,
        [data-theme="dark"] textarea:focus,
        [data-theme="dark"] select:focus {
            border-color: var(--accent-purple) !important;
            box-shadow: 0 0 0 2px rgba(131, 94, 132, 0.3) !important;
        }

        /* Fix table cell text visibility in dark mode */
        [data-theme="dark"] .cake-options-table td,
        [data-theme="dark"] .cake-options-table th {
            color: var(--text-primary) !important;
        }

        [data-theme="dark"] .cake-options-table .table-row select,
        [data-theme="dark"] .cake-options-table .table-row input[type="number"],
        [data-theme="dark"] .cake-options-table .table-row input[type="text"] {
            background: var(--bg-secondary) !important;
            color: var(--text-primary) !important;
            border: 2px solid var(--border-color) !important;
        }

        /* Fix item subtotal visibility - use dark text on light subtotal container */
        [data-theme="dark"] .item-subtotal span[data-translate="item-subtotal"] {
            color: #333 !important;
        }

        [data-theme="dark"] .item-subtotal strong {
            color: var(--accent-purple) !important;
        }

        /* Fix radio button styling in dark mode */
        [data-theme="dark"] input[type="radio"] {
            accent-color: var(--accent-purple);
        }

        /* Agreement section styling */
        .agreement-label {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            line-height: 1.5;
        }

        .agreement-label input[type="radio"] {
            margin-top: 3px;
            flex-shrink: 0;
        }

        .agreement-text {
            flex: 1;
            color: var(--text-primary);
        }

        [data-theme="dark"] .agreement-text {
            color: var(--text-primary);
        }

        /* Responsive adjustments for floating buttons */
        @media (max-width: 768px) {
            .floating-btn {
                width: 60px;
                height: 60px;
                font-size: 24px;
                border: 3px solid white;
            }

            .theme-toggle-btn {
                left: 20px;
                bottom: 20px;
            }

            .translate-btn {
                left: 85px;
                bottom: 20px;
            }

            .scroll-bottom-btn {
                right: 85px;
                bottom: 20px;
            }

            .scroll-top-btn {
                right: 20px;
                bottom: 20px;
            }
        }

        /* Extra small mobile devices */
        @media (max-width: 480px) {
            .form-container {
                padding: 10px;
                margin: 5px;
            }

            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .form-section {
                padding: 10px;
                margin: 10px 0;
            }

            .form-section h2 {
                font-size: 1.2em;
            }

            .product-card {
                padding: 10px;
            }

            .total-section {
                padding: 15px 10px;
            }

            .total-amount {
                font-size: 2em;
            }

            .floating-btn {
                width: 50px;
                height: 50px;
                font-size: 18px;
            }

            .floating-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .theme-toggle-btn {
                left: 15px;
                bottom: 15px;
            }

            .translate-btn {
                left: 75px;
                bottom: 15px;
            }

            .scroll-bottom-btn {
                right: 75px;
                bottom: 15px;
            }

            .scroll-top-btn {
                right: 15px;
                bottom: 15px;
            }
        }
    </style>
</head>
    <body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <img src="./logo.png" alt="Dabiri's Desserts - Cakes" class="logo-svg">
            </div>
            <h1 data-translate="header-title">Order Form</h1>
            <p data-translate="header-subtitle">Create your perfect custom dessert order</p>
        </div>

        <div class="form-container">
            <form id="dessertOrderForm" class="order-form" novalidate onsubmit="return false;">
                <!-- Hidden honeypot field for spam protection -->
                <div style="display: none;">
                    <label>Don't fill this out if you're human: <input name="bot-field" /></label>
                </div>

                <!-- Brand Description -->
                <div class="brand-info">
                    <div class="brand-description" data-translate="welcome-text">
                        <strong>Thanks for choosing Dabiri's Desserts!</strong><br><br>
                        As a passionate at-home baker, I pour my heart into every creation that comes out of my kitchen, and I'm thrilled to bring a touch of sweetness to your day. All of my treats are made from scratch, decorated with my vanilla buttercream frosting. Before placing your order, please take a moment to review my policies below.
                    </div>
                </div>

                <!-- Customer Information -->
                <div class="form-section">
                    <h2 data-translate="customer-info">Customer Information</h2>
                    <div class="section-content">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName" data-translate="first-name">First Name <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></label>
                            <input type="text" id="firstName" name="firstName" required>
                            <div class="error-message" id="firstNameError"></div>
                        </div>
                        <div class="form-group">
                            <label for="lastName" data-translate="last-name">Last Name <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></label>
                            <input type="text" id="lastName" name="lastName" required>
                            <div class="error-message" id="lastNameError"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                                <label for="email" data-translate="email">E-mail <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></label>
                                <input type="email" id="email" name="email" placeholder="example@example.com" required>
                            <div class="error-message" id="emailError"></div>
                        </div>
                        <div class="form-group">
                            <label for="phone" data-translate="phone">Phone Number <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></label>
                                <input type="tel" id="phone" name="phone" placeholder="(000) 000-0000" required>
                                <small>please enter a valid phone number</small>
                            <div class="error-message" id="phoneError"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pickup Information -->
                <div class="form-section">
                    <h2 data-translate="pickup-info">Pickup Information</h2>
                    <div class="section-content">
                        <div class="policy-section">
                            <div class="policy-title" data-translate="pickup-times">PICKUP TIMES</div>
                            <div class="policy-text" data-translate="pickup-times-text">
                                Wednesday - All day<br>
                                Weekends - All day<br><br>
                                When will you be arriving for pick up?<br><br>
                                â€¢ Please submit your order at least <strong>10 days</strong> in advance. Last-minute orders may be subject to a <strong>$20 rush fee</strong>.
                            </div>
                        </div>

                    <div class="form-row">
                        <div class="form-group">
                                <label for="pickupDate" data-translate="pickup-date">Pickup Date <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></label>
                                <input type="date" id="pickupDate" name="pickupDate" required>
                        </div>
                        <div class="form-group">
                                <label for="pickupTime" data-translate="pickup-time">Pickup Time</label>
                                <input type="time" id="pickupTime" name="pickupTime" placeholder="HH : MM">
                                <small data-translate="hour-minutes">Hour Minutes</small>
                            </div>
                        </div>

                        <div class="policy-section">
                            <div class="policy-text" data-translate="fridge-freezer-note">
                                <strong>IF THE DATE YOU WANT ISN'T AVAILABLE, PLEASE KEEP IN MIND CAKES LAST UP TO 4 DAYS IN THE FRIDGE AND UP TO 2 WEEKS IN THE FREEZER.</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products Section -->
                <div class="form-section">
                    <h2 data-translate="choose-your-products">Choose Your Products</h2>
                    <div class="section-content">
                        <div class="category-filter">
                            <select class="category-select" id="categoryFilter" data-translate="category-select">
                                <option value="all" data-translate="categories-all">Categories: All</option>
                                <option value="cakes" data-translate="cakes">Cakes</option>
                                <option value="cupcakes" data-translate="cupcakes">Cupcakes</option>
                                <option value="deals" data-translate="deals-packages">Deals & Packages</option>
                            </select>
                        </div>

                        <div class="policy-section">
                            <div class="policy-text" data-translate="base-prices-note">
                                The prices below are <strong>base</strong> prices.<br>
                                *All cakes will be <strong>three layers</strong>*<br>
                                Additional add-ons can be selected.
                    </div>
                        </div>

                        <!-- My Products Header -->
                        <div style="text-align: center; margin: 20px 0;">
                            <img src="./cake_1.png" alt="Beautiful purple cake with flowers" class="cake-decoration-img">
                        </div>
                        <h3 style="color: #7D5577; margin: 30px 0 20px 0; font-size: 1.5em;" data-translate="my-products">My Products <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></h3>
                        <span class="red-required" data-translate="this-field-required">âš  This field is required.</span>

                        <!-- Cakes Section -->
                        <div class="product-category" data-category="cakes">
                            <h4 style="color: #7D5577; margin: 20px 0 15px 0; font-size: 1.3em; display: flex; align-items: center;" data-translate="cakes">
                                Cakes
                            </h4>
                            <div class="category-content">
                                <!-- Circle Cake -->
                                <div class="product-card" data-product="circle-cake">
                                    <div class="product-header">
                                        <input type="checkbox" class="product-checkbox" id="circle-cake" name="products" value="circle-cake">
                                        <label for="circle-cake" class="product-title" data-translate="circle-cake">Circle Cake</label>
                                        <span class="product-price">$45.00</span>
                                    </div>
                                    <div class="product-options" style="margin-top: 20px;">
                                        <div class="cake-options-table">
                                            <div class="table-header">
                                                <div class="col-size" data-translate="size">Size</div>
                                                <div class="col-qty" data-translate="qty">Qty</div>
                                                <div class="col-flavor" data-translate="flavor">Flavor</div>
                                                <div class="col-filling" data-translate="filling">Filling</div>
                                                <div class="col-border" data-translate="border">Border</div>
                                                <div class="col-addons" data-translate="add-ons">Add-Ons</div>
                                                <div class="col-text" data-translate="text">Text</div>
                                                <div class="col-price" data-translate="price">Price</div>
                                            </div>
                                            <div class="table-row">
                                                <div class="col-size">6"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="45">
                                                </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                <option value="vanilla" data-translate="vanilla">Vanilla</option>
                                <option value="chocolate" data-translate="chocolate">Chocolate</option>
                                <option value="red-velvet" data-translate="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                            </select>
                        </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate" data-translate="chocolate">Chocolate</option>
                                                        <option value="cookies-cream" data-translate="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla" data-translate="vanilla">Vanilla</option>
                                <option value="cream-cheese" data-translate="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                            </select>
                        </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                                                </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                            <div class="table-row">
                                                <div class="col-size">8"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="55">
                                                </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                                                </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                            <div class="table-row">
                                                <div class="col-size">10"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="65">
                                                </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                                                </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="item-subtotal">
                                            <span data-translate="item-subtotal">Item subtotal:</span> <strong class="subtotal-amount">$0.00</strong>
                                        </div>
                    </div>
                </div>

                                <!-- Heart Cake -->
                                <div class="product-card" data-product="heart-cake">
                                    <div class="product-header">
                                        <input type="checkbox" class="product-checkbox" id="heart-cake" name="products" value="heart-cake">
                                        <label for="heart-cake" class="product-title" data-translate="heart-cake">Heart Cake</label>
                                        <span class="product-price">$45.00</span>
                        </div>
                                    <div class="product-options" style="margin-top: 20px;">
                                        <div class="cake-options-table">
                                            <div class="table-header">
                                                <div class="col-size" data-translate="size">Size</div>
                                                <div class="col-qty" data-translate="qty">Qty</div>
                                                <div class="col-flavor" data-translate="flavor">Flavor</div>
                                                <div class="col-filling" data-translate="filling">Filling</div>
                                                <div class="col-border" data-translate="border">Border</div>
                                                <div class="col-addons" data-translate="add-ons">Add-Ons</div>
                                                <div class="col-text" data-translate="text">Text</div>
                                                <div class="col-price" data-translate="price">Price</div>
                        </div>
                                            <div class="table-row">
                                                <div class="col-size">6"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="45">
                        </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                        </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                        </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                        </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                            <div class="table-row">
                                                <div class="col-size">8"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="55">
                                                </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                                                </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                            <div class="table-row">
                                                <div class="col-size">10"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="65">
                                                </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                        </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                        </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                                                </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="item-subtotal">
                                            <span data-translate="item-subtotal">Item subtotal:</span> <strong class="subtotal-amount">$0.00</strong>
                                        </div>
                    </div>
                </div>

                                <!-- Star Cake -->
                                <div class="product-card" data-product="star-cake">
                                    <div class="product-header">
                                        <input type="checkbox" class="product-checkbox" id="star-cake" name="products" value="star-cake">
                                        <label for="star-cake" class="product-title" data-translate="star-cake">Star Cake</label>
                                        <span class="product-price">$45.00</span>
                                    </div>
                                    <div class="product-options" style="margin-top: 20px;">
                                        <div class="cake-options-table">
                                            <div class="table-header">
                                                <div class="col-size" data-translate="size">Size</div>
                                                <div class="col-qty" data-translate="qty">Qty</div>
                                                <div class="col-flavor" data-translate="flavor">Flavor</div>
                                                <div class="col-filling" data-translate="filling">Filling</div>
                                                <div class="col-border" data-translate="border">Border</div>
                                                <div class="col-addons" data-translate="add-ons">Add-Ons</div>
                                                <div class="col-text" data-translate="text">Text</div>
                                                <div class="col-price" data-translate="price">Price</div>
                                            </div>
                                            <div class="table-row">
                                                <div class="col-size">6"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="45">
                                                </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                                                </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                            <div class="table-row">
                                                <div class="col-size">8"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="55">
                                                </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                                                </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                            <div class="table-row">
                                                <div class="col-size">10"</div>
                                                <div class="col-qty">
                                                    <input type="number" class="quantity-input" min="0" value="0" data-price="65">
                                                </div>
                                                <div class="col-flavor">
                                                    <select class="product-select" data-addon-type="flavor">
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="red-velvet">Red Velvet</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-filling">
                                                    <select class="product-select" data-addon-type="filling">
                                                        <option value="chocolate">Chocolate</option>
                                                        <option value="cookies-cream">Cookies & Cream</option>
                                                        <option value="vanilla">Vanilla</option>
                                                        <option value="cream-cheese">Cream Cheese</option>
                                                        <option value="custom" data-price="5" data-translate="custom-plus-5">Custom +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-border">
                                                    <select class="product-select" data-addon-type="border">
                                                        <option value="none" data-translate="no-border">No Border</option>
                                                        <option value="shell" data-translate="shell-border">Shell Border</option>
                                                        <option value="tight-shell" data-translate="tight-shell-border">Tight Shell Border</option>
                                                        <option value="reverse-scroll" data-translate="reverse-scroll-border">Reverse Scroll Border</option>
                                                        <option value="bubble" data-translate="bubble-border">Bubble Border</option>
                                                    </select>
                                                </div>
                                                <div class="col-addons">
                                                    <select class="product-select" data-addon-type="addons">
                                                        <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                        <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                        <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                        <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                        <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                        <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                        <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                    </select>
                                                </div>
                                                <div class="col-text">
                                                    <select class="product-select" data-addon-type="text">
                                                        <option value="none" data-translate="no-text">No Text</option>
                                                        <option value="freehand" data-translate="freehand-buttercream">Freehand Buttercream</option>
                                                        <option value="bubble-letters" data-translate="chocolate-bubble-letters">Chocolate Bubble Letters</option>
                                                    </select>
                                                </div>
                                                <div class="col-price">
                                                    $<span class="row-price">0.00</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="item-subtotal">
                                            <span data-translate="item-subtotal">Item subtotal:</span> <strong class="subtotal-amount">$0.00</strong>
                                        </div>
                                    </div>
                                </div>
                    </div>
                </div>

                        <!-- Cupcakes Section -->
                        <div class="product-category" data-category="cupcakes">
                            <h4 style="color: #7D5577; margin: 20px 0 15px 0; font-size: 1.3em; display: flex; align-items: center;">
                                Cupcakes
                            </h4>
                            <div class="category-content">
                                <!-- 1/2 Dozen Cupcakes -->
                                <div class="product-card" data-product="half-dozen-cupcakes">
                                    <div class="product-header">
                                        <input type="checkbox" class="product-checkbox" id="half-dozen-cupcakes" name="products" value="half-dozen-cupcakes">
                                        <label for="half-dozen-cupcakes" class="product-title" data-translate="half-dozen-cupcakes">1/2 Dozen Cupcakes</label>
                                        <span class="product-price">$14.00</span>
                                    </div>
                                    <p data-translate="half-dozen-description">$14 for 1/2 Dozen Cupcakes. Please specify the quantity of each flavor.</p>
                                    <div class="product-options" style="margin-top: 20px;">
                                        <div class="cupcake-options-layout">
                                            <div class="flavors-section">
                                                <h4 style="margin: 0 0 15px 0; color: #A0739C; font-size: 1.1em;" data-translate="flavors-section">Flavors ($14 for 1/2 dozen each)</h4>
                                                <div class="flavor-list">
                                                    <div class="flavor-item">
                                                        <label data-translate="vanilla">Vanilla</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="14" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="chocolate">Chocolate</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="14" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="red-velvet">Red Velvet</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="14" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="custom-plus-5">Custom (+$5)</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="19" placeholder="0">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="addons-section">
                                                <h4 style="margin: 0 0 15px 0; color: #A0739C; font-size: 1.1em;" data-translate="add-ons">Add-Ons</h4>
                                                <select class="product-select addon-select" data-addon-type="addons">
                                                    <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                    <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                    <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                    <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                    <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                    <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                    <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="item-subtotal">
                                            <span data-translate="item-subtotal">Item subtotal:</span> <strong class="subtotal-amount">$0.00</strong>
                                        </div>
                                    </div>
                                </div>

                                <!-- 1 Dozen Cupcakes -->
                                <div class="product-card" data-product="dozen-cupcakes">
                                    <div class="product-header">
                                        <input type="checkbox" class="product-checkbox" id="dozen-cupcakes" name="products" value="dozen-cupcakes">
                                        <label for="dozen-cupcakes" class="product-title" data-translate="dozen-cupcakes">1 Dozen Cupcakes</label>
                                        <span class="product-price">$24.00</span>
                                    </div>
                                    <p data-translate="dozen-description">$24 for 1 Dozen Cupcakes. Please specify the quantity of each flavor.</p>
                                    <div class="product-options" style="margin-top: 20px;">
                                        <div class="cupcake-options-layout">
                                            <div class="flavors-section">
                                                <h4 style="margin: 0 0 15px 0; color: #A0739C; font-size: 1.1em;" data-translate="flavors-section-dozen">Flavors ($24 for 1 dozen each)</h4>
                                                <div class="flavor-list">
                                                    <div class="flavor-item">
                                                        <label data-translate="vanilla">Vanilla</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="24" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="chocolate">Chocolate</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="24" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="red-velvet">Red Velvet</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="24" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="custom-plus-5">Custom (+$5)</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="29" placeholder="0">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="addons-section">
                                                <h4 style="margin: 0 0 15px 0; color: #A0739C; font-size: 1.1em;" data-translate="add-ons">Add-Ons</h4>
                                                <select class="product-select addon-select" data-addon-type="addons">
                                                    <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                    <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                    <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                    <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                    <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                    <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                    <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="item-subtotal">
                                            <span data-translate="item-subtotal">Item subtotal:</span> <strong class="subtotal-amount">$0.00</strong>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>


                        <!-- Deals & Packages Section -->
                        <div class="product-category" data-category="deals">
                            <h4 style="color: #7D5577; margin: 20px 0 15px 0; font-size: 1.3em; display: flex; align-items: center;">
                                Deals & Packages
                            </h4>
                            <div class="category-content">
                                <!-- Vintage Heart Cake -->
                                <div class="product-card" data-product="vintage-heart-cake">
                                    <div class="product-header">
                                        <input type="checkbox" class="product-checkbox" id="vintage-heart-cake" name="products" value="vintage-heart-cake">
                                        <label for="vintage-heart-cake" class="product-title" data-translate="vintage-heart-cake">Vintage Heart Cake</label>
                                        <span class="product-price">$65.00</span>
                                    </div>
                                    <p data-translate="heavy-buttercream-piping">Heavy Buttercream Piping</p>
                                    <div class="product-options" style="margin-top: 20px;">
                                        <div class="vintage-cake-header" style="display: grid; grid-template-columns: 100px 70px 120px 120px 150px; gap: 8px; margin-bottom: 15px; font-weight: bold; color: #A0739C; border-bottom: 2px solid #e1e5e9; padding-bottom: 10px;">
                                            <div>Flavor</div>
                                            <div>Quantity</div>
                                            <div>Filling</div>
                                            <div>Border</div>
                                            <div>Add-Ons</div>
                                        </div>
                                        <div class="flavor-options vintage-flavor-options">
                                            <div class="flavor-row">
                                                <span class="flavor-label">Vanilla</span>
                                                <input type="number" class="quantity-input" min="0" value="0" data-flavor="vanilla" data-price="65">
                                                <select class="product-select" data-addon-type="filling" style="margin-left: 10px;">
                                                    <option value="chocolate">Chocolate</option>
                                                    <option value="cookies-cream">Cookies & Cream</option>
                                                    <option value="vanilla">Vanilla</option>
                                                    <option value="custom" data-price="5">Custom +$5</option>
                                                </select>
                                                <select class="product-select" data-addon-type="border" style="margin-left: 10px;">
                                                    <option value="none">No Border</option>
                                                    <option value="shell">Shell Border</option>
                                                    <option value="tight-shell">Tight Shell Border</option>
                                                    <option value="reverse-scroll">Reverse Scroll Border</option>
                                                    <option value="bubble">Bubble Border</option>
                                                </select>
                                                <select class="product-select" data-addon-type="addons" style="margin-left: 10px;">
                                                    <option value="none">No Add-Ons</option>
                                                    <option value="glitter-silver" data-price="3">Glitter Spray (Silver) +$3</option>
                                                    <option value="glitter-gold" data-price="3">Glitter Spray (Gold) +$3</option>
                                                    <option value="pearl-detailing" data-price="5">Pearl Detailing +$5</option>
                                                    <option value="bows" data-price="5">Bows +$5</option>
                                                    <option value="vintage-piping" data-price="5">Heavy/Vintage Piping +$5</option>
                                                    <option value="gold-leaf" data-price="5">Gold Leaf +$5</option>
                                                </select>
                                            </div>
                                            <div class="flavor-row">
                                                <span class="flavor-label">Chocolate</span>
                                                <input type="number" class="quantity-input" min="0" value="0" data-flavor="chocolate" data-price="65">
                                                <select class="product-select" data-addon-type="filling" style="margin-left: 10px;">
                                                    <option value="chocolate">Chocolate</option>
                                                    <option value="cookies-cream">Cookies & Cream</option>
                                                    <option value="vanilla">Vanilla</option>
                                                    <option value="custom" data-price="5">Custom +$5</option>
                                                </select>
                                                <select class="product-select" data-addon-type="border" style="margin-left: 10px;">
                                                    <option value="none">No Border</option>
                                                    <option value="shell">Shell Border</option>
                                                    <option value="tight-shell">Tight Shell Border</option>
                                                    <option value="reverse-scroll">Reverse Scroll Border</option>
                                                    <option value="bubble">Bubble Border</option>
                                                </select>
                                                <select class="product-select" data-addon-type="addons" style="margin-left: 10px;">
                                                    <option value="none">No Add-Ons</option>
                                                    <option value="glitter-silver" data-price="3">Glitter Spray (Silver) +$3</option>
                                                    <option value="glitter-gold" data-price="3">Glitter Spray (Gold) +$3</option>
                                                    <option value="pearl-detailing" data-price="5">Pearl Detailing +$5</option>
                                                    <option value="bows" data-price="5">Bows +$5</option>
                                                    <option value="vintage-piping" data-price="5">Heavy/Vintage Piping +$5</option>
                                                    <option value="gold-leaf" data-price="5">Gold Leaf +$5</option>
                                                </select>
                                            </div>
                                            <div class="flavor-row">
                                                <span class="flavor-label">Red Velvet</span>
                                                <input type="number" class="quantity-input" min="0" value="0" data-flavor="red-velvet" data-price="65">
                                                <select class="product-select" data-addon-type="filling" style="margin-left: 10px;">
                                                    <option value="chocolate">Chocolate</option>
                                                    <option value="cookies-cream">Cookies & Cream</option>
                                                    <option value="vanilla">Vanilla</option>
                                                    <option value="custom" data-price="5">Custom +$5</option>
                                                </select>
                                                <select class="product-select" data-addon-type="border" style="margin-left: 10px;">
                                                    <option value="none">No Border</option>
                                                    <option value="shell">Shell Border</option>
                                                    <option value="tight-shell">Tight Shell Border</option>
                                                    <option value="reverse-scroll">Reverse Scroll Border</option>
                                                    <option value="bubble">Bubble Border</option>
                                                </select>
                                                <select class="product-select" data-addon-type="addons" style="margin-left: 10px;">
                                                    <option value="none">No Add-Ons</option>
                                                    <option value="glitter-silver" data-price="3">Glitter Spray (Silver) +$3</option>
                                                    <option value="glitter-gold" data-price="3">Glitter Spray (Gold) +$3</option>
                                                    <option value="pearl-detailing" data-price="5">Pearl Detailing +$5</option>
                                                    <option value="bows" data-price="5">Bows +$5</option>
                                                    <option value="vintage-piping" data-price="5">Heavy/Vintage Piping +$5</option>
                                                    <option value="gold-leaf" data-price="5">Gold Leaf +$5</option>
                                                </select>
                                            </div>
                                            <div class="flavor-row">
                                                <span class="flavor-label">Custom +$5</span>
                                                <input type="number" class="quantity-input" min="0" value="0" data-flavor="custom" data-price="70">
                                                <select class="product-select" data-addon-type="filling" style="margin-left: 10px;">
                                                    <option value="chocolate">Chocolate</option>
                                                    <option value="cookies-cream">Cookies & Cream</option>
                                                    <option value="vanilla">Vanilla</option>
                                                    <option value="custom" data-price="5">Custom +$5</option>
                                                </select>
                                                <select class="product-select" data-addon-type="border" style="margin-left: 10px;">
                                                    <option value="none">No Border</option>
                                                    <option value="shell">Shell Border</option>
                                                    <option value="tight-shell">Tight Shell Border</option>
                                                    <option value="reverse-scroll">Reverse Scroll Border</option>
                                                    <option value="bubble">Bubble Border</option>
                                                </select>
                                                <select class="product-select" data-addon-type="addons" style="margin-left: 10px;">
                                                    <option value="none">No Add-Ons</option>
                                                    <option value="glitter-silver" data-price="3">Glitter Spray (Silver) +$3</option>
                                                    <option value="glitter-gold" data-price="3">Glitter Spray (Gold) +$3</option>
                                                    <option value="pearl-detailing" data-price="5">Pearl Detailing +$5</option>
                                                    <option value="bows" data-price="5">Bows +$5</option>
                                                    <option value="vintage-piping" data-price="5">Heavy/Vintage Piping +$5</option>
                                                    <option value="gold-leaf" data-price="5">Gold Leaf +$5</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="item-subtotal">
                                            <span data-translate="item-subtotal">Item subtotal:</span> <strong class="subtotal-amount">$0.00</strong>
                                        </div>
                                    </div>
                                </div>

                                <!-- Birthday 1/2 Dozen Cupcakes -->
                                <div class="product-card" data-product="birthday-half-dozen-cupcakes">
                                    <div class="product-header">
                                        <input type="checkbox" class="product-checkbox" id="birthday-half-dozen-cupcakes" name="products" value="birthday-half-dozen-cupcakes">
                                        <label for="birthday-half-dozen-cupcakes" class="product-title" data-translate="birthday-half-dozen-cupcakes">Birthday 1/2 Dozen Cupcakes</label>
                                        <span class="product-price">$30.00</span>
                                    </div>
                                    <p data-translate="custom-board-candle">w/ Custom Board and Candle</p>
                                    <div class="product-options" style="margin-top: 20px;">
                                        <div class="cupcake-options-layout">
                                            <div class="flavors-section">
                                                <h4 style="margin: 0 0 15px 0; color: #A0739C; font-size: 1.1em;">Flavors ($30 for 1/2 dozen w/ Board & Candle)</h4>
                                                <div class="flavor-list">
                                                    <div class="flavor-item">
                                                        <label data-translate="vanilla">Vanilla</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="30" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="chocolate">Chocolate</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="30" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="red-velvet">Red Velvet</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="30" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="custom-plus-5">Custom (+$5)</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="35" placeholder="0">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="addons-section">
                                                <h4 style="margin: 0 0 15px 0; color: #A0739C; font-size: 1.1em;" data-translate="add-ons">Add-Ons</h4>
                                                <select class="product-select addon-select" data-addon-type="addons">
                                                    <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                    <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                    <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                    <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                    <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                    <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                    <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="item-subtotal">
                                            <span data-translate="item-subtotal">Item subtotal:</span> <strong class="subtotal-amount">$0.00</strong>
                                        </div>
                                    </div>
                                </div>

                                <!-- Birthday Full Dozen Cupcakes -->
                                <div class="product-card" data-product="birthday-full-dozen-cupcakes">
                                    <div class="product-header">
                                        <input type="checkbox" class="product-checkbox" id="birthday-full-dozen-cupcakes" name="products" value="birthday-full-dozen-cupcakes">
                                        <label for="birthday-full-dozen-cupcakes" class="product-title" data-translate="birthday-full-dozen-cupcakes">Birthday Full Dozen Cupcakes</label>
                                        <span class="product-price">$35.00</span>
                                    </div>
                                    <p data-translate="custom-board-candle">w/ Custom Board and Candle</p>
                                    <div class="product-options" style="margin-top: 20px;">
                                        <div class="cupcake-options-layout">
                                            <div class="flavors-section">
                                                <h4 style="margin: 0 0 15px 0; color: #A0739C; font-size: 1.1em;" data-translate="flavors-section-birthday">Flavors ($35 for 1 dozen w/ Board & Candle)</h4>
                                                <div class="flavor-list">
                                                    <div class="flavor-item">
                                                        <label data-translate="vanilla">Vanilla</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="35" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="chocolate">Chocolate</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="35" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="red-velvet">Red Velvet</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="35" placeholder="0">
                                                    </div>
                                                    <div class="flavor-item">
                                                        <label data-translate="custom-plus-5">Custom (+$5)</label>
                                                        <input type="number" class="quantity-input" min="0" value="0" data-price="40" placeholder="0">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="addons-section">
                                                <h4 style="margin: 0 0 15px 0; color: #A0739C; font-size: 1.1em;" data-translate="add-ons">Add-Ons</h4>
                                                <select class="product-select addon-select" data-addon-type="addons">
                                                    <option value="none" data-translate="no-add-ons">No Add-Ons</option>
                                                    <option value="glitter-silver" data-price="3" data-translate="glitter-silver">Glitter Spray (Silver) +$3</option>
                                                    <option value="glitter-gold" data-price="3" data-translate="glitter-gold">Glitter Spray (Gold) +$3</option>
                                                    <option value="pearl-detailing" data-price="5" data-translate="pearl-detailing">Pearl Detailing +$5</option>
                                                    <option value="bows" data-price="5" data-translate="bows">Bows +$5</option>
                                                    <option value="vintage-piping" data-price="5" data-translate="vintage-piping">Heavy/Vintage Buttercream Piping +$5</option>
                                                    <option value="gold-leaf" data-price="5" data-translate="gold-leaf">Gold Leaf +$5</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="item-subtotal">
                                            <span data-translate="item-subtotal">Item subtotal:</span> <strong class="subtotal-amount">$0.00</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Custom Items Section -->
                <div class="form-section">
                    <h2 data-translate="custom-items">Custom Items</h2>
                    <div class="section-content">
                        <div class="form-group">
                            <p style="margin-bottom: 15px; color: #666; font-size: 0.95em;" data-translate="custom-items-text">
                                Don't see what you're looking for? Let me know about any custom items like cookies, bread puddings, or other desserts you'd like to order.
                            </p>
                            <textarea
                                id="customItems"
                                name="customItems"
                                placeholder="Please describe any custom items you'd like to order (e.g., cookies, bread pudding, etc.) and any specific requirements..." data-translate="custom-items-placeholder"
                                rows="4"
                                style="width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-family: inherit; font-size: 14px; resize: vertical; min-height: 100px;"
                            ></textarea>
                        </div>
                    </div>
                </div>

                <!-- Design/Aesthetic Requests -->
                <div class="form-section">
                    <h2 data-translate="special-requests">Design/Aesthetic Requests <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></h2>
                    <div class="section-content">
                        <div class="form-group">
                            <textarea id="designRequests" style="min-height: 100px;" placeholder="Please write N/A if you'd like us to use our creative freedom. If purchasing multiple products, please number them in the text box." required data-translate="special-requests-text"></textarea>
                        </div>

                        <h3 style="margin: 20px 0;" data-translate="mood-board-text">Attach a mood board or inspiration pictures below. Please note I do not replicate the work of other cake artists. I will use my personal decorating style and best judgment to make you a cake that you love!</h3>

                        <div class="file-upload-area" id="fileUploadArea">
                            <div class="upload-icon">â˜ï¸</div>
                            <div class="upload-text" data-translate="browse-files">Browse Files</div>
                            <div class="upload-hint" data-translate="drag-drop">Drag and drop files here</div>
                            <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
                        </div>
                        <div class="uploaded-files" id="uploadedFiles"></div>
                        </div>
                        </div>

                <!-- Cake Text -->
                <div class="form-section">
                    <h2 data-translate="cake-text">Cake Text <span style="color: #e74c3c !important; font-weight: bold !important; font-size: 1.5em !important; margin-left: 3px !important;">*</span> TEST</h2>
                    <div class="section-content">
                        <div class="form-group">
                            <textarea id="cakeText" placeholder="Please specify text and text color. If purchasing multiple cakes, please number them in the text box." required data-translate="cake-text-placeholder"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Color Requests -->
                <div class="form-section">
                    <h2 data-translate="color-requests">Color Requests <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></h2>
                    <div class="section-content">
                        <div class="form-group">
                            <textarea id="colorRequests" placeholder="PLEASE NOTE: Extra pigmented colors are $5 extra (navy blue, royal blue, black, red, etc). Please write N/A if you'd like us to use our creative freedom. If purchasing multiple products, please number them in the text box." required data-translate="color-requests-placeholder"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Custom Flavor/Filling -->
                <div class="form-section">
                    <h2 data-translate="custom-flavor-filling">OPTIONAL: Custom Flavor/Filling</h2>
                    <div class="section-content">
                    <div class="form-group">
                            <textarea id="customFlavor" placeholder="Please specify the custom flavor and/or filling if applicable." data-translate="custom-flavor-placeholder"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Additional Specifications -->
                <div class="form-section">
                    <h2 data-translate="additional-specifications">ATTENTION: List any other specifications or add-ons that aren't listed as options. <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></h2>
                    <div class="section-content">
                        <div class="form-group">
                            <textarea id="additionalSpecs" required></textarea>
                        </div>
                    </div>
                </div>

                <!-- Allergies/Dietary Restrictions -->
                <div class="form-section">
                    <h2 data-translate="allergies">Do you have any allergies/dietary restrictions? Please note, I do NOT make gluten free cakes. <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></h2>
                    <div class="section-content">
                        <div class="form-group">
                            <textarea id="allergies" required></textarea>
                        </div>
                        <div class="policy-section">
                            <div class="policy-text" data-translate="allergies-text">
                                Although I will do my very best to accommodate your dietary restrictions, all of my products are produced in a home kitchen that is not subject to public health inspection and may process common food allergens. Please be advised that baked goods may contain or come into contact with peanuts, tree nuts, or other allergens.
                    </div>
                        </div>
                    </div>
                </div>

                <!-- How did you hear about us -->
                <div class="form-section">
                    <h2 data-translate="how-did-you-hear">How did you hear about Dabiri's Desserts? <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></h2>
                    <div class="section-content">
                    <div class="form-group">
                            <textarea id="howDidYouHear" required></textarea>
                        </div>
                    </div>
                </div>

                <!-- Policies Section -->
                <div class="policy-section">
                    <div class="policy-text" data-translate="policies-text">
                        â€¢ All orders must be picked up in <strong>Chelsea, MA</strong> (near Bellingham Square bus stop). I <strong>do not</strong> offer delivery services.<br><br>
                        â€¢ Please submit your order at least <strong>10 days</strong> in advance. Last-minute orders may be subject to a <strong>$20 rush fee</strong>.<br><br>
                        â€¢ Once you submit an order, I will email you within <strong>3 business days</strong> with a sketch of your order and a price confirmation.<br><br>
                        â€¢ A <strong>50% deposit</strong> is required to secure your order. The remaining balance is due at pickup.<br><br>
                        â€¢ I accept the following payment methods: <strong>Apple Cash, Zelle, Venmo, or cash</strong>.<br><br>
                        â€¢ <strong>ALLERGY ALERT:</strong> My frosting recipe contains nut products. Please do not place an order if you have nut allergies.<br><br>
                        â€¢ Please note that I am not responsible or liable for what happens to the dessert after it has been handed off to you.<br><br>
                        <span data-translate="contact-info">â€¢ Payment details and final confirmation process will be provided in the follow-up email.<br><br>
                        For any questions or special requests, please contact me at</span> <a href="mailto:dabirisdesserts@gmail.com">dabirisdesserts@gmail.com</a>
                    </div>
                </div>

                <!-- Agreement -->
                <div class="form-section">
                    <h2 data-translate="agreement-title">Agreement <span style="color: #e74c3c; font-weight: bold; font-size: 1.5em; margin-left: 3px;">*</span></h2>
                    <div class="section-content">
                        <div class="form-group">
                            <label class="agreement-label">
                                <input type="radio" id="agreement" name="agreement" value="agree" required>
                                <span class="agreement-text" data-translate="agreement-text">By checking this box, I agree to Dabiri's Dessert's brand policies and acknowledge that full cake payment is due within 72 hours of receiving my invoice.</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Total Section -->
                <div class="total-section">
                    <div class="total-title" data-translate="total-title">Total (Subject to Change)</div>
                    <div class="total-amount" id="totalAmount">$0.00</div>
                </div>

                <!-- Success Message -->
                <div class="success-message" id="successMessage" data-translate="success-message">
                    <strong>Order Submitted Successfully!</strong><br>
                    Thank you for your order! I will contact you within 3 business days with a sketch of your order and price confirmation.
                </div>

                <!-- Error Message -->
                <div class="error-message" id="errorMessage" style="display: none;" data-translate="error-message">
                    <strong>Error submitting order.</strong><br>
                    Please try again or contact us directly.
                </div>

                <!-- Submit Button -->
                <button type="submit" class="submit-btn" id="submitBtn" data-translate="submit-btn">Submit</button>

                <!-- Decorative cake image after form -->
                <div style="text-align: center; margin: 40px 0 20px 0;">
                    <img src="./cake_2.png" alt="Elegant tiered cake with purple flowers" class="cake-decoration-img">
                </div>
            </form>
        </div>
    </div>

    <script>
        // Product pricing
        const productPrices = {
            'circle-cake': 45.00,
            'heart-cake': 0,
            'star-cake': 0,
            'half-dozen-cupcakes': 14.00,
            'dozen-cupcakes': 24.00,
            'birthday-2dozen-cupcakes': 45.00,
            'vintage-heart-cake': 65.00,
            'birthday-half-dozen-cupcakes': 30.00,
            'birthday-full-dozen-cupcakes': 35.00
        };

        const addonPrices = {
            'glitter-silver': 3,
            'glitter-gold': 3,
            'pearl-detailing': 5,
            'bows': 5,
            'vintage-piping': 5,
            'gold-leaf': 5,
            'custom': 5
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            initializeFileUpload();
            checkFormCompletion();
            setMinPickupDate();
            calculateTotal();
        });

        function initializeEventListeners() {
            // Product selection
            document.querySelectorAll('.product-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const card = this.closest('.product-card');
                    const options = card.querySelector('.product-options');

                    if (this.checked) {
                        card.classList.add('selected');
                    } else {
                        card.classList.remove('selected');
                    }
                    calculateItemSubtotal(card);
                    calculateTotal();
                    checkFormCompletion();
                });
            });

            // Quantity inputs
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('input', function() {
                    const card = this.closest('.product-card');
                    calculateItemSubtotal(card);
                    calculateTotal();
                });
            });

            // Product selects (add-ons, flavors, etc.)
            document.querySelectorAll('.product-select').forEach(select => {
                select.addEventListener('change', function() {
                    const card = this.closest('.product-card');
                    calculateItemSubtotal(card);
                    calculateTotal();
                });
            });


            // Category filter
            document.getElementById('categoryFilter').addEventListener('change', filterCategories);

            // Form validation
            document.querySelectorAll('input[required], textarea[required], select[required]').forEach(field => {
                field.addEventListener('input', checkFormCompletion);
                field.addEventListener('change', checkFormCompletion);
            });

            // Agreement radio
            document.getElementById('agreement').addEventListener('change', checkFormCompletion);

            // Form submission
            document.getElementById('dessertOrderForm').addEventListener('submit', handleFormSubmit);

            // Other selects (non-product specific)
            document.querySelectorAll('select:not(.product-select)').forEach(select => {
                select.addEventListener('change', calculateTotal);
            });
        }


        function initializeFileUpload() {
            const uploadArea = document.getElementById('fileUploadArea');
            const fileInput = document.getElementById('fileInput');
            const uploadedFiles = document.getElementById('uploadedFiles');

            uploadArea.addEventListener('click', () => fileInput.click());

            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
                const files = e.dataTransfer.files;
                handleFiles(files);
            });

            fileInput.addEventListener('change', function() {
                handleFiles(this.files);
            });

            function handleFiles(files) {
                Array.from(files).forEach(file => {
                    if (file.type.startsWith('image/')) {
                        displayFile(file);
                    }
                });
            }

            function displayFile(file) {
                const fileDiv = document.createElement('div');
                fileDiv.className = 'uploaded-file';
                fileDiv.innerHTML = `
                    <span class="file-icon">ðŸ“·</span>
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${(file.size / 1024 / 1024).toFixed(2)} MB</div>
                    </div>
                    <button type="button" class="remove-file" onclick="this.parentElement.remove()">Ã—</button>
                `;
                uploadedFiles.appendChild(fileDiv);
            }
        }

        function filterCategories() {
            const selectedCategory = document.getElementById('categoryFilter').value;
            const categories = document.querySelectorAll('.product-category');

            categories.forEach(category => {
                const categoryType = category.dataset.category;
                if (selectedCategory === 'all' || selectedCategory === categoryType) {
                    category.style.display = 'block';
                } else {
                    category.style.display = 'none';
                }
            });
        }

        function calculateItemSubtotal(productCard) {
            const checkbox = productCard.querySelector('.product-checkbox');
            const subtotalElement = productCard.querySelector('.subtotal-amount');
            const rowPriceElement = productCard.querySelector('.row-price');

            if (!checkbox.checked || !subtotalElement) {
                if (subtotalElement) subtotalElement.textContent = '$0.00';
                if (rowPriceElement) rowPriceElement.textContent = '0.00';
                return;
            }

            const productValue = checkbox.value;
            let itemTotal = 0;

            // Check if this is a cake with table layout
            const tableRows = productCard.querySelectorAll('.table-row');
            if (tableRows.length > 0) {
                // Handle cake table layout (multiple rows for different sizes)
                tableRows.forEach(row => {
                    const quantityInput = row.querySelector('.quantity-input');
                    const rowPrice = row.querySelector('.row-price');
                    const quantity = parseInt(quantityInput.value) || 0;

                    let rowTotal = 0;

                    if (quantity > 0) {
                        // Get base price from the quantity input's data-price
                        const sizePrice = parseFloat(quantityInput.dataset.price) || 0;
                        rowTotal = sizePrice * quantity;

                        // Add addon pricing from this row's selects
                        const selects = row.querySelectorAll('.product-select');
                        selects.forEach(select => {
                            const selectedOption = select.options[select.selectedIndex];
                            const addonPrice = parseFloat(selectedOption.dataset.price) || 0;
                            rowTotal += addonPrice;
                        });
                    }

                    // Update row price display
                    if (rowPrice) {
                        rowPrice.textContent = rowTotal.toFixed(2);
                    }

                    // Add to item total
                    itemTotal += rowTotal;
                });
            } else {
                // Handle cupcakes/cookies flavor-based pricing
                const quantityInputs = productCard.querySelectorAll('.quantity-input');
                let hasQuantity = false;

                quantityInputs.forEach(input => {
                    const quantity = parseInt(input.value) || 0;
                    if (quantity > 0) {
                        hasQuantity = true;
                        const unitPrice = parseFloat(input.dataset.price) || 0;

                        // For cupcakes, calculate per unit, for cakes calculate per cake
                        if (productValue.includes('cupcakes')) {
                            // For cupcakes: price is per batch, but we calculate based on quantity ordered
                            itemTotal += unitPrice;
                        } else {
                            // For cakes: price per individual cake
                            itemTotal += unitPrice * quantity;
                        }
                    }
                });

                // If no quantities selected, use base price
                if (!hasQuantity) {
                    itemTotal = productPrices[productValue] || 0;
                }

                // Add addon pricing from selects
                const selects = productCard.querySelectorAll('.product-select');
                selects.forEach(select => {
                    const selectedOption = select.options[select.selectedIndex];
                    const addonPrice = parseFloat(selectedOption.dataset.price) || 0;

                    // For cupcakes, multiply addon price by quantity of each flavor
                    if (productValue.includes('cupcakes')) {
                        // Count total quantity for this product
                        let totalQuantity = 0;
                        quantityInputs.forEach(input => {
                            totalQuantity += parseInt(input.value) || 0;
                        });

                        if (totalQuantity > 0) {
                            itemTotal += addonPrice;
                        }
                    } else {
                        itemTotal += addonPrice;
                    }
                });
            }

            subtotalElement.textContent = `$${itemTotal.toFixed(2)}`;
        }

        function calculateTotal() {
            let total = 0;

            // Sum up all item subtotals
            document.querySelectorAll('.product-checkbox:checked').forEach(checkbox => {
                const productCard = checkbox.closest('.product-card');
                const subtotalElement = productCard.querySelector('.subtotal-amount');

                if (subtotalElement) {
                    const subtotalText = subtotalElement.textContent.replace('$', '');
                    const subtotal = parseFloat(subtotalText) || 0;
                    total += subtotal;
                }
            });

            document.getElementById('totalAmount').textContent = `$${total.toFixed(2)}`;
        }

        function checkFormCompletion() {
            const requiredFields = document.querySelectorAll('input[required], textarea[required], select[required]');
            const agreement = document.getElementById('agreement');
            const submitBtn = document.getElementById('submitBtn');

            let allFieldsValid = true;

            // Check required fields
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    allFieldsValid = false;
                }
            });

            // Check if at least one product is selected
            const selectedProducts = document.querySelectorAll('.product-checkbox:checked');
            if (selectedProducts.length === 0) {
                allFieldsValid = false;
            }

            // Check agreement
            if (!agreement.checked) {
                allFieldsValid = false;
            }

            // Enable/disable submit button
            submitBtn.disabled = !allFieldsValid;
        }

        function setMinPickupDate() {
            const pickupDate = document.getElementById('pickupDate');
            const today = new Date();
            const minDate = new Date(today.getTime() + (10 * 24 * 60 * 60 * 1000)); // 10 days from now
            pickupDate.min = minDate.toISOString().split('T')[0];
        }

        // Function to validate all required fields and guide user to missing sections
        function validateRequiredFields() {
            const requiredFields = [
                { id: 'firstName', name: 'First Name', section: 'Customer Information' },
                { id: 'lastName', name: 'Last Name', section: 'Customer Information' },
                { id: 'email', name: 'E-mail', section: 'Customer Information' },
                { id: 'phone', name: 'Phone Number', section: 'Customer Information' },
                { id: 'pickupDate', name: 'Pickup Date', section: 'Pickup Information' },
                { id: 'designRequests', name: 'Design/Aesthetic Requests', section: 'Design/Aesthetic Requests' },
                { id: 'cakeText', name: 'Cake Text', section: 'Cake Text' },
                { id: 'colorRequests', name: 'Color Requests', section: 'Color Requests' },
                { id: 'additionalSpecs', name: 'Additional Specifications', section: 'Additional Specifications' },
                { id: 'allergies', name: 'Allergies/Dietary Restrictions', section: 'Allergies/Dietary Restrictions' },
                { id: 'howDidYouHear', name: 'How did you hear about us', section: 'How did you hear about us' },
                { id: 'agreement', name: 'Agreement', section: 'Agreement' }
            ];

            const missingFields = [];
            const firstMissingField = [];

            // Check each required field
            requiredFields.forEach(field => {
                const element = document.getElementById(field.id);
                if (!element || !element.value.trim()) {
                    missingFields.push(field);
                    if (firstMissingField.length === 0) {
                        firstMissingField.push(field);
                    }
                }
            });

            // Check if any products are selected
            const productCards = document.querySelectorAll('.product-card');
            const hasProducts = Array.from(productCards).some(card => {
                const checkbox = card.querySelector('.product-checkbox');
                const quantityInput = card.querySelector('input[type="number"]');
                return checkbox && checkbox.checked && quantityInput && parseInt(quantityInput.value) > 0;
            });

            if (!hasProducts) {
                missingFields.push({ id: 'products', name: 'My Products', section: 'Choose Your Products' });
                if (firstMissingField.length === 0) {
                    firstMissingField.push({ id: 'products', name: 'My Products', section: 'Choose Your Products' });
                }
            }

            if (missingFields.length > 0) {
                // Add visual feedback to submit button
                const submitBtn = document.getElementById('submitBtn');
                submitBtn.classList.add('validation-error');
                setTimeout(() => {
                    submitBtn.classList.remove('validation-error');
                }, 3000);

                // Create detailed error message
                let errorMessage = `Please complete the following required sections:\n\n`;
                missingFields.forEach(field => {
                    errorMessage += `â€¢ ${field.section}: ${field.name}\n`;
                });

                // Show alert with missing sections
                alert(errorMessage);

                // Scroll to first missing field
                if (firstMissingField.length > 0) {
                    const firstField = firstMissingField[0];
                    let targetElement;

                    if (firstField.id === 'products') {
                        // Scroll to products section
                        targetElement = document.querySelector('[data-translate="my-products"]');
                    } else {
                        // Scroll to the specific field
                        targetElement = document.getElementById(firstField.id);
                    }

                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center'
                        });

                        // Highlight the field briefly
                        targetElement.style.border = '2px solid #e74c3c';
                        targetElement.style.boxShadow = '0 0 10px rgba(231, 76, 60, 0.5)';
                        setTimeout(() => {
                            targetElement.style.border = '';
                            targetElement.style.boxShadow = '';
                        }, 3000);
                    }
                }

                return false;
            }

            return true;
        }

        async function handleFormSubmit(e) {
            e.preventDefault();
            console.log('Form submission started');

            // Validate required fields first
            if (!validateRequiredFields()) {
                return; // Stop submission if validation fails
            }

            // Show loading state
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;

            try {
                // Collect form data
                const formData = collectFormData();

                // Submit to API
                const response = await fetch('/api/submit-order', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                if (result.success) {
                    // Show success message with order ID
                    const successMessage = document.getElementById('successMessage');
                    successMessage.innerHTML = `
                        <strong>Order Submitted Successfully!</strong><br>
                        <strong>Order ID: ${result.orderId}</strong><br>
                        Please check your email for confirmation. I will contact you within 3 business days with a sketch and final pricing.
                    `;
                    successMessage.style.display = 'block';

                    // Scroll to success message
                    successMessage.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });

                    // Reset form after delay
                    setTimeout(() => {
                        if (confirm('Would you like to submit another order?')) {
                            location.reload();
                        }
                    }, 3000);
                } else {
                    throw new Error(result.message || 'Submission failed');
                }

            } catch (error) {
                console.error('Error submitting order:', error);
                alert('Error: ' + error.message);

                // Show error message
                const errorMessage = document.getElementById('errorMessage');
                errorMessage.innerHTML = `
                    <strong>Error submitting order.</strong><br>
                    Please try again or contact us directly.<br>
                    Error: ${error.message}
                `;
                errorMessage.style.display = 'block';

                // Scroll to error message
                errorMessage.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            } finally {
                // Reset button state
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        }

        function collectFormData() {
            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                pickupDate: document.getElementById('pickupDate').value,
                customItems: document.getElementById('customItems').value,
                designRequests: document.getElementById('designRequests').value,
                cakeText: document.getElementById('cakeText').value,
                colorRequests: document.getElementById('colorRequests').value,
                customFlavor: document.getElementById('customFlavor').value,
                additionalSpecs: document.getElementById('additionalSpecs').value,
                allergies: document.getElementById('allergies').value,
                howDidYouHear: document.getElementById('howDidYouHear').value,
                products: []
            };

            // Collect product data
            document.querySelectorAll('.product-card').forEach(card => {
                const productName = card.querySelector('.product-title').textContent;
                const quantity = parseInt(card.querySelector('.quantity-input').value) || 0;
                const price = parseFloat(card.querySelector('.product-price').textContent.replace('$', '')) || 0;

                if (quantity > 0) {
                    formData.products.push({
                        name: productName,
                        quantity: quantity,
                        price: price
                    });
                }
            });

            return formData;
        }

        // Initialize subtotals on page load
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.product-card').forEach(card => {
                calculateItemSubtotal(card);
            });

            // Initialize theme, translation, and floating buttons
            initializeTheme();
            initializeTranslation();
            initializeFloatingButtons();
        });

        // Theme Management
        function initializeTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const currentTheme = localStorage.getItem('theme') || 'light';

            // Set initial theme
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeIcon(currentTheme);

            // Theme toggle event listener
            themeToggle.addEventListener('click', toggleTheme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        }

        function updateThemeIcon(theme) {
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
        }

        // Translation Management
        function initializeTranslation() {
            const translateBtn = document.getElementById('translateBtn');
            const currentLanguage = localStorage.getItem('language') || 'en';

            // Set initial language
            document.documentElement.setAttribute('data-lang', currentLanguage);
            updateTranslationIcon(currentLanguage);

            // Apply initial translation immediately
            translatePage(currentLanguage);

            // Apply translation again after a short delay to ensure all elements are loaded
            setTimeout(() => {
                translatePage(currentLanguage);
            }, 100);

            // Add click event listener
            translateBtn.addEventListener('click', toggleLanguage);
        }

        function toggleLanguage() {
            const currentLang = document.documentElement.getAttribute('data-lang') || 'en';
            const newLang = currentLang === 'en' ? 'es' : 'en';

            document.documentElement.setAttribute('data-lang', newLang);
            localStorage.setItem('language', newLang);
            updateTranslationIcon(newLang);
            translatePage(newLang);
        }

        function updateTranslationIcon(lang) {
            const translateBtn = document.getElementById('translateBtn');
            translateBtn.textContent = lang === 'en' ? 'ðŸŒ' : 'ðŸ‡ºðŸ‡¸';
        }

        function translatePage(lang) {
            // Translation object
            const translations = {
                en: {
                    'page-title': 'Dabiri\'s Desserts - Custom Order Form',
                    'header-title': 'Dabiri\'s Desserts',
                    'header-subtitle': 'Custom Dessert Order Form',
                    'contact-info': 'â€¢ Payment details and final confirmation process will be provided in the follow-up email.<br><br>For any questions or special requests, please contact me at',
                    'agreement-title': 'Agreement',
                    'agreement-text': 'By checking this box, I agree to Dabiri\'s Dessert\'s brand policies and acknowledge that full cake payment is due within 72 hours of receiving my invoice.',
                    'total-title': 'Total (Subject to Change)',
                    'submit-btn': 'Submit Order',
                    'required': '*',
                    'theme-toggle': 'Toggle Dark/Light Mode',
                    'translate-btn': 'Translate Page',
                    'scroll-top': 'Scroll to Top',
                    'scroll-bottom': 'Scroll to Bottom',
                    'welcome-text': 'Thanks for choosing Dabiri\'s Desserts! As a passionate at-home baker, I pour my heart into every creation that comes out of my kitchen, and I\'m thrilled to bring a touch of sweetness to your day. All of my treats are made from scratch, decorated with my vanilla buttercream frosting. Before placing your order, please take a moment to review my policies below.',
                    'customer-info': 'Customer Information',
                    'first-name': 'First Name',
                    'last-name': 'Last Name',
                    'email': 'Email',
                    'phone': 'Phone Number',
                    'pickup-info': 'Pickup Information',
                    'pickup-times': 'PICKUP TIMES',
                    'pickup-times-text': 'Wednesday - All day<br>Weekends - All day<br><br>When will you be arriving for pick up?<br><br>â€¢ Please submit your order at least <strong>10 days</strong> in advance. Last-minute orders may be subject to a <strong>$20 rush fee</strong>.',
                    'pickup-date': 'Pickup Date',
                    'pickup-time': 'Pickup Time',
                    'hour-minutes': 'Hour Minutes',
                    'fridge-freezer-note': '<strong>IF THE DATE YOU WANT ISN\'T AVAILABLE, PLEASE KEEP IN MIND CAKES LAST UP TO 4 DAYS IN THE FRIDGE AND UP TO 2 WEEKS IN THE FREEZER.</strong>',
                    'my-products': 'My Products',
                    'category-select': 'Select Category',
                    'base-prices-note': 'The prices below are <strong>base</strong> prices.<br>*All cakes will be <strong>three layers</strong>*<br>Additional add-ons can be selected.',
                    'special-requests': 'Special Requests',
                    'special-requests-text': 'Please write N/A if you\'d like us to use our creative freedom. If purchasing multiple products, please number them in the text box.',
                    'mood-board': 'Mood Board',
                    'mood-board-text': 'Attach a mood board or inspiration pictures below. Please note I do not replicate the work of other cake artists. I will use my personal decorating style and best judgment to make you a cake that you love!',
                    'browse-files': 'Browse Files',
                    'drag-drop': 'Drag and drop files here',
                    'cake-text': 'Cake Text',
                    'allergies': 'Allergies',
                    'allergies-text': 'Although I will do my very best to accommodate your dietary restrictions, all of my products are produced in a home kitchen that is not subject to public health inspection and may process common food allergens. Please be advised that baked goods may contain or come into contact with peanuts, tree nuts, or other allergens.',
                    'how-did-you-hear': 'How did you hear about us?',
                    'policies-title': 'Policies',
                    'policies-text': 'â€¢ All orders must be picked up in <strong>Chelsea, MA</strong> (near Bellingham Square bus stop). I <strong>do not</strong> offer delivery services.<br><br>â€¢ Please submit your order at least <strong>10 days</strong> in advance. Last-minute orders may be subject to a <strong>$20 rush fee</strong>.<br><br>â€¢ Once you submit an order, I will email you within <strong>3 business days</strong> with a sketch of your order and a price confirmation.<br><br>â€¢ A <strong>50% deposit</strong> is required to secure your order. The remaining balance is due at pickup.<br><br>â€¢ I accept the following payment methods: <strong>Apple Cash, Zelle, Venmo, or cash</strong>.<br><br>â€¢ <strong>ALLERGY ALERT:</strong> My frosting recipe contains nut products. Please do not place an order if you have nut allergies.<br><br>â€¢ Please note that I am not responsible or liable for what happens to the dessert after it has been handed off to you.<br><br>',
                    'success-message': '<strong>Order Submitted Successfully!</strong><br>Thank you for your order! I will contact you within 3 business days with a sketch of your order and price confirmation.',
                    'error-message': '<strong>Error submitting order.</strong><br>Please try again or contact us directly.',
                    'this-field-required': 'âš  This field is required.',
                    'cakes': 'Cakes',
                    'cupcakes': 'Cupcakes',
                    'deals-packages': 'Deals & Packages',
                    'categories-all': 'Categories: All',
                    'circle-cake': 'Circle Cake',
                    'heart-cake': 'Heart Cake',
                    'star-cake': 'Star Cake',
                    'vintage-heart-cake': 'Vintage Heart Cake',
                    'half-dozen-cupcakes': '1/2 Dozen Cupcakes',
                    'dozen-cupcakes': '1 Dozen Cupcakes',
                    'birthday-half-dozen-cupcakes': 'Birthday 1/2 Dozen Cupcakes',
                    'birthday-full-dozen-cupcakes': 'Birthday Full Dozen Cupcakes',
                    'size': 'Size',
                    'qty': 'Qty',
                    'flavor': 'Flavor',
                    'filling': 'Filling',
                    'border': 'Border',
                    'add-ons': 'Add-Ons',
                    'text': 'Text',
                    'price': 'Price',
                    'vanilla': 'Vanilla',
                    'chocolate': 'Chocolate',
                    'strawberry': 'Strawberry',
                    'red-velvet': 'Red Velvet',
                    'no-border': 'No Border',
                    'shell-border': 'Shell Border',
                    'tight-shell-border': 'Tight Shell Border',
                    'reverse-scroll-border': 'Reverse Scroll Border',
                    'bubble-border': 'Bubble Border',
                    'no-add-ons': 'No Add-Ons',
                    'no-text': 'No Text',
                    'freehand-buttercream': 'Freehand Buttercream',
                    'chocolate-bubble-letters': 'Chocolate Bubble Letters',
                    'custom-items': 'Custom Items',
                    'custom-items-text': 'Don\'t see what you\'re looking for? Let me know about any custom items like cookies, bread puddings, or other desserts you\'d like to order.',
                    'custom-items-placeholder': 'Please describe any custom items you\'d like to order (e.g., cookies, bread pudding, etc.) and any specific requirements...',
                    'choose-your-products': 'Choose Your Products',
                    'color-requests': 'Color Requests',
                    'custom-flavor-filling': 'OPTIONAL: Custom Flavor/Filling',
                    'additional-specifications': 'ATTENTION: List any other specifications or add-ons that aren\'t listed as options.',
                    'half-dozen-description': '$14 for 1/2 Dozen Cupcakes. Please specify the quantity of each flavor.',
                    'dozen-description': '$24 for 1 Dozen Cupcakes. Please specify the quantity of each flavor.',
                    'heavy-buttercream-piping': 'Heavy Buttercream Piping',
                    'custom-board-candle': 'w/ Custom Board and Candle',
                    'cake-text-placeholder': 'Please specify text and text color. If purchasing multiple cakes, please number them in the text box.',
                    'color-requests-placeholder': 'PLEASE NOTE: Extra pigmented colors are $5 extra (navy blue, royal blue, black, red, etc). Please write N/A if you\'d like us to use our creative freedom. If purchasing multiple products, please number them in the text box.',
                    'custom-flavor-placeholder': 'Please specify the custom flavor and/or filling if applicable.',
                    'cookies-cream': 'Cookies & Cream',
                    'cream-cheese': 'Cream Cheese',
                    'shell-border': 'Shell Border',
                    'tight-shell-border': 'Tight Shell Border',
                    'reverse-scroll-border': 'Reverse Scroll Border',
                    'bubble-border': 'Bubble Border',
                    'glitter-silver': 'Glitter Spray (Silver) +$3',
                    'glitter-gold': 'Glitter Spray (Gold) +$3',
                    'sprinkles': 'Sprinkles +$2',
                    'edible-flowers': 'Edible Flowers +$5',
                    'freehand-buttercream': 'Freehand Buttercream',
                    'chocolate-bubble-letters': 'Chocolate Bubble Letters',
                    'strawberry': 'Strawberry',
                    'red-velvet': 'Red Velvet',
                    'pearl-detailing': 'Pearl Detailing +$5',
                    'bows': 'Bows +$5',
                    'vintage-piping': 'Heavy/Vintage Buttercream Piping +$5',
                    'gold-leaf': 'Gold Leaf +$5',
                    'subtotal': 'Subtotal',
                    'item-subtotal': 'Item subtotal',
                    'flavors-section': 'Flavors ($14 for 1/2 dozen each)',
                    'flavors-section-dozen': 'Flavors ($24 for 1 dozen each)',
                    'flavors-section-birthday': 'Flavors ($35 for 1 dozen w/ Board & Candle)',
                    'custom-plus-5': 'Custom (+$5)'
                },
                es: {
                    'page-title': 'Postres de Dabiri - Formulario de Pedido Personalizado',
                    'header-title': 'Postres de Dabiri',
                    'header-subtitle': 'Formulario de Pedido de Postres Personalizados',
                    'contact-info': 'â€¢ Los detalles de pago y el proceso de confirmaciÃ³n final se proporcionarÃ¡n en el correo de seguimiento.<br><br>Para cualquier pregunta o solicitud especial, por favor contÃ¡ctame en',
                    'agreement-title': 'Acuerdo',
                    'agreement-text': 'Al marcar esta casilla, acepto las polÃ­ticas de marca de Postres de Dabiri y reconozco que el pago completo del pastel vence dentro de las 72 horas de recibir mi factura.',
                    'total-title': 'Total (Sujeto a Cambios)',
                    'submit-btn': 'Enviar Pedido',
                    'required': '*',
                    'theme-toggle': 'Alternar Modo Oscuro/Claro',
                    'translate-btn': 'Traducir PÃ¡gina',
                    'scroll-top': 'Ir Arriba',
                    'scroll-bottom': 'Ir Abajo',
                    'welcome-text': 'Â¡Gracias por elegir Postres de Dabiri! Como pastelera apasionada en casa, pongo mi corazÃ³n en cada creaciÃ³n que sale de mi cocina, y estoy emocionada de traer un toque de dulzura a tu dÃ­a. Todos mis dulces estÃ¡n hechos desde cero, decorados con mi glaseado de mantequilla de vainilla. Antes de hacer tu pedido, por favor tÃ³mate un momento para revisar mis polÃ­ticas a continuaciÃ³n.',
                    'customer-info': 'InformaciÃ³n del Cliente',
                    'first-name': 'Nombre',
                    'last-name': 'Apellido',
                    'email': 'Correo ElectrÃ³nico',
                    'phone': 'NÃºmero de TelÃ©fono',
                    'pickup-info': 'InformaciÃ³n de Recogida',
                    'pickup-times': 'HORARIOS DE RECOGIDA',
                    'pickup-times-text': 'MiÃ©rcoles - Todo el dÃ­a<br>Fines de semana - Todo el dÃ­a<br><br>Â¿CuÃ¡ndo llegarÃ¡s para recoger?<br><br>â€¢ Por favor envÃ­a tu pedido al menos <strong>10 dÃ­as</strong> de antelaciÃ³n. Los pedidos de Ãºltimo momento pueden estar sujetos a una <strong>tarifa de urgencia de $20</strong>.',
                    'pickup-date': 'Fecha de Recogida',
                    'pickup-time': 'Hora de Recogida',
                    'hour-minutes': 'Hora Minutos',
                    'fridge-freezer-note': '<strong>SI LA FECHA QUE QUIERES NO ESTÃ DISPONIBLE, TEN EN CUENTA QUE LOS PASTELES DURAN HASTA 4 DÃAS EN EL REFRIGERADOR Y HASTA 2 SEMANAS EN EL CONGELADOR.</strong>',
                    'my-products': 'Mis Productos',
                    'category-select': 'Seleccionar CategorÃ­a',
                    'base-prices-note': 'Los precios a continuaciÃ³n son precios <strong>base</strong>.<br>*Todos los pasteles tendrÃ¡n <strong>tres capas</strong>*<br>Se pueden seleccionar complementos adicionales.',
                    'special-requests': 'Solicitudes Especiales',
                    'special-requests-text': 'Por favor escribe N/A si quieres que usemos nuestra libertad creativa. Si compras mÃºltiples productos, por favor numÃ©ralos en el cuadro de texto.',
                    'mood-board': 'Tablero de InspiraciÃ³n',
                    'mood-board-text': 'Adjunta un tablero de inspiraciÃ³n o fotos de inspiraciÃ³n a continuaciÃ³n. Ten en cuenta que no replico el trabajo de otros artistas de pasteles. UsarÃ© mi estilo de decoraciÃ³n personal y mejor juicio para hacerte un pastel que ames.',
                    'browse-files': 'Examinar Archivos',
                    'drag-drop': 'Arrastra y suelta archivos aquÃ­',
                    'cake-text': 'Texto del Pastel',
                    'allergies': 'Alergias',
                    'allergies-text': 'Aunque harÃ© mi mejor esfuerzo para acomodar tus restricciones dietÃ©ticas, todos mis productos se producen en una cocina casera que no estÃ¡ sujeta a inspecciÃ³n de salud pÃºblica y puede procesar alÃ©rgenos alimentarios comunes. Ten en cuenta que los productos horneados pueden contener o entrar en contacto con manÃ­, nueces de Ã¡rbol u otros alÃ©rgenos.',
                    'how-did-you-hear': 'Â¿CÃ³mo te enteraste de nosotros?',
                    'policies-title': 'PolÃ­ticas',
                    'policies-text': 'â€¢ Todos los pedidos deben recogerse en <strong>Chelsea, MA</strong> (cerca de la parada de autobÃºs Bellingham Square). <strong>No</strong> ofrezco servicios de entrega.<br><br>â€¢ Por favor envÃ­a tu pedido al menos <strong>10 dÃ­as</strong> de antelaciÃ³n. Los pedidos de Ãºltimo momento pueden estar sujetos a una <strong>tarifa de urgencia de $20</strong>.<br><br>â€¢ Una vez que envÃ­es un pedido, te enviarÃ© un correo electrÃ³nico dentro de <strong>3 dÃ­as hÃ¡biles</strong> con un boceto de tu pedido y confirmaciÃ³n de precio.<br><br>â€¢ Se requiere un <strong>depÃ³sito del 50%</strong> para asegurar tu pedido. El saldo restante se debe al recoger.<br><br>â€¢ Acepto los siguientes mÃ©todos de pago: <strong>Apple Cash, Zelle, Venmo o efectivo</strong>.<br><br>â€¢ <strong>ALERTA DE ALERGIA:</strong> Mi receta de glaseado contiene productos de nueces. Por favor no hagas un pedido si tienes alergias a las nueces.<br><br>â€¢ Ten en cuenta que no soy responsable de lo que le pase al postre despuÃ©s de que te lo haya entregado.<br><br>',
                    'success-message': '<strong>Â¡Pedido Enviado Exitosamente!</strong><br>Â¡Gracias por tu pedido! Te contactarÃ© dentro de 3 dÃ­as hÃ¡biles con un boceto de tu pedido y confirmaciÃ³n de precio.',
                    'error-message': '<strong>Error al enviar el pedido.</strong><br>Por favor intenta de nuevo o contÃ¡ctanos directamente.',
                    'this-field-required': 'âš  Este campo es requerido.',
                    'cakes': 'Pasteles',
                    'cupcakes': 'Cupcakes',
                    'deals-packages': 'Ofertas y Paquetes',
                    'categories-all': 'CategorÃ­as: Todas',
                    'circle-cake': 'Pastel Circular',
                    'heart-cake': 'Pastel de CorazÃ³n',
                    'star-cake': 'Pastel de Estrella',
                    'vintage-heart-cake': 'Pastel de CorazÃ³n Vintage',
                    'half-dozen-cupcakes': '1/2 Docena de Cupcakes',
                    'dozen-cupcakes': '1 Docena de Cupcakes',
                    'birthday-half-dozen-cupcakes': '1/2 Docena de Cupcakes de CumpleaÃ±os',
                    'birthday-full-dozen-cupcakes': 'Docena Completa de Cupcakes de CumpleaÃ±os',
                    'size': 'TamaÃ±o',
                    'qty': 'Cant.',
                    'flavor': 'Sabor',
                    'filling': 'Relleno',
                    'border': 'Borde',
                    'add-ons': 'Extras',
                    'text': 'Texto',
                    'price': 'Precio',
                    'vanilla': 'Vainilla',
                    'chocolate': 'Chocolate',
                    'strawberry': 'Fresa',
                    'red-velvet': 'Terciopelo Rojo',
                    'no-border': 'Sin Borde',
                    'shell-border': 'Borde de Concha',
                    'tight-shell-border': 'Borde de Concha Apretada',
                    'reverse-scroll-border': 'Borde de Scroll Inverso',
                    'bubble-border': 'Borde de Burbujas',
                    'no-add-ons': 'Sin Extras',
                    'no-text': 'Sin Texto',
                    'freehand-buttercream': 'Crema de Mantequilla a Mano',
                    'chocolate-bubble-letters': 'Letras de Burbujas de Chocolate',
                    'custom-items': 'ArtÃ­culos Personalizados',
                    'custom-items-text': 'Â¿No ves lo que buscas? DÃ©jame saber sobre cualquier artÃ­culo personalizado como galletas, budines de pan u otros postres que te gustarÃ­a pedir.',
                    'custom-items-placeholder': 'Por favor describe cualquier artÃ­culo personalizado que te gustarÃ­a pedir (ej., galletas, budÃ­n de pan, etc.) y cualquier requisito especÃ­fico...',
                    'choose-your-products': 'Elige Tus Productos',
                    'color-requests': 'Solicitudes de Color',
                    'custom-flavor-filling': 'OPCIONAL: Sabor/Relleno Personalizado',
                    'additional-specifications': 'ATENCIÃ“N: Lista cualquier otra especificaciÃ³n o complemento que no estÃ© listado como opciÃ³n.',
                    'half-dozen-description': '$14 por 1/2 Docena de Cupcakes. Por favor especifica la cantidad de cada sabor.',
                    'dozen-description': '$24 por 1 Docena de Cupcakes. Por favor especifica la cantidad de cada sabor.',
                    'heavy-buttercream-piping': 'DecoraciÃ³n Pesada de Crema de Mantequilla',
                    'custom-board-candle': 'con Tablero Personalizado y Vela',
                    'cake-text-placeholder': 'Por favor especifica el texto y color del texto. Si compras mÃºltiples pasteles, por favor numÃ©ralos en el cuadro de texto.',
                    'color-requests-placeholder': 'NOTA IMPORTANTE: Los colores extra pigmentados cuestan $5 adicionales (azul marino, azul real, negro, rojo, etc). Por favor escribe N/A si quieres que usemos nuestra libertad creativa. Si compras mÃºltiples productos, por favor numÃ©ralos en el cuadro de texto.',
                    'custom-flavor-placeholder': 'Por favor especifica el sabor personalizado y/o relleno si aplica.',
                    'cookies-cream': 'Galletas y Crema',
                    'cream-cheese': 'Queso Crema',
                    'shell-border': 'Borde de Concha',
                    'tight-shell-border': 'Borde de Concha Apretada',
                    'reverse-scroll-border': 'Borde de Scroll Inverso',
                    'bubble-border': 'Borde de Burbujas',
                    'glitter-silver': 'Spray de Brillo (Plateado) +$3',
                    'glitter-gold': 'Spray de Brillo (Dorado) +$3',
                    'sprinkles': 'Granitas +$2',
                    'edible-flowers': 'Flores Comestibles +$5',
                    'freehand-buttercream': 'Crema de Mantequilla a Mano',
                    'chocolate-bubble-letters': 'Letras de Burbujas de Chocolate',
                    'strawberry': 'Fresa',
                    'red-velvet': 'Terciopelo Rojo',
                    'pearl-detailing': 'Detalles de Perlas +$5',
                    'bows': 'Lazos +$5',
                    'vintage-piping': 'DecoraciÃ³n Pesada/Vintage de Crema de Mantequilla +$5',
                    'gold-leaf': 'Hoja de Oro +$5',
                    'subtotal': 'Subtotal',
                    'item-subtotal': 'Subtotal del artÃ­culo',
                    'flavors-section': 'Sabores ($14 por 1/2 docena cada uno)',
                    'flavors-section-dozen': 'Sabores ($24 por 1 docena cada uno)',
                    'flavors-section-birthday': 'Sabores ($35 por 1 docena con Tablero y Vela)',
                    'custom-plus-5': 'Personalizado (+$5)'
                }
            };

            // Apply translations
            Object.keys(translations[lang]).forEach(key => {
                const elements = document.querySelectorAll(`[data-translate="${key}"]`);
                elements.forEach(element => {
                    if (key === 'contact-info' || key === 'pickup-times-text' || key === 'fridge-freezer-note' || key === 'base-prices-note' || key === 'special-requests-text' || key === 'mood-board-text' || key === 'allergies-text' || key === 'policies-text' || key === 'success-message' || key === 'error-message') {
                        element.innerHTML = translations[lang][key];
                    } else if (key.includes('placeholder') || key.includes('custom-items-placeholder')) {
                        element.placeholder = translations[lang][key];
                    } else {
                        element.textContent = translations[lang][key];
                    }
                });
            });

            // Update CSS-generated labels for mobile view
            // Remove any existing translation style first
            const existingStyle = document.querySelector('style[data-translation="mobile-labels"]');
            if (existingStyle) {
                existingStyle.remove();
            }

            if (lang === 'es') {
                const style = document.createElement('style');
                style.setAttribute('data-translation', 'mobile-labels');
                style.textContent = `
                    .cake-options-table .col-size::before {
                        content: "TamaÃ±o" !important;
                    }
                    .cake-options-table .col-qty::before {
                        content: "Cant." !important;
                    }
                    .cake-options-table .col-flavor::before {
                        content: "Sabor" !important;
                    }
                    .cake-options-table .col-filling::before {
                        content: "Relleno" !important;
                    }
                    .cake-options-table .col-border::before {
                        content: "Borde" !important;
                    }
                    .cake-options-table .col-addons::before {
                        content: "Extras" !important;
                    }
                    .cake-options-table .col-text::before {
                        content: "Texto" !important;
                    }
                    .cake-options-table .col-price::before {
                        content: "Precio" !important;
                    }
                `;
                document.head.appendChild(style);
            }

            // Update page title
            document.title = translations[lang]['page-title'];

            // Update ALL options in ALL dropdowns
            document.querySelectorAll('select option[data-translate]').forEach(option => {
                const translateKey = option.getAttribute('data-translate');
                if (translations[lang][translateKey]) {
                    option.textContent = translations[lang][translateKey];
                }
            });

            // Update button tooltips
            document.getElementById('themeToggle').title = translations[lang]['theme-toggle'];
            document.getElementById('translateBtn').title = translations[lang]['translate-btn'];
            document.getElementById('scrollTop').title = translations[lang]['scroll-top'];
            document.getElementById('scrollBottom').title = translations[lang]['scroll-bottom'];
        }

        // Floating Buttons Management
        function initializeFloatingButtons() {
            const scrollTopBtn = document.getElementById('scrollTop');
            const scrollBottomBtn = document.getElementById('scrollBottom');

            // Scroll to top functionality
            scrollTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Scroll to bottom functionality
            scrollBottomBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: document.documentElement.scrollHeight,
                    behavior: 'smooth'
                });
            });

            // Show/hide buttons based on scroll position
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const scrollHeight = document.documentElement.scrollHeight;
                const clientHeight = document.documentElement.clientHeight;
                const scrollBottom = scrollHeight - scrollTop - clientHeight;

                // Show scroll-to-top button when scrolled down
                if (scrollTop > 100) {
                    scrollTopBtn.classList.add('visible');
                } else {
                    scrollTopBtn.classList.remove('visible');
                }

                // Hide scroll-to-bottom button when near bottom
                if (scrollBottom < 100) {
                    scrollBottomBtn.classList.add('hidden');
                } else {
                    scrollBottomBtn.classList.remove('hidden');
                }
            });

            // Initial check for scroll position
            const scrollTop = window.pageYOffset;
            const scrollHeight = document.documentElement.scrollHeight;
            const clientHeight = document.documentElement.clientHeight;
            const scrollBottom = scrollHeight - scrollTop - clientHeight;

            if (scrollTop > 100) {
                scrollTopBtn.classList.add('visible');
            }

            if (scrollBottom < 100) {
                scrollBottomBtn.classList.add('hidden');
            }
        }
    </script>

    <!-- Floating Action Buttons -->
    <div class="floating-buttons">
        <button class="floating-btn theme-toggle-btn" id="themeToggle" title="Toggle Dark/Light Mode">
            ðŸŒ™
        </button>
        <button class="floating-btn translate-btn" id="translateBtn" title="Translate Page">
            ðŸŒ
        </button>
        <button class="floating-btn scroll-top-btn" id="scrollTop" title="Scroll to Top">
            â†‘
        </button>
        <button class="floating-btn scroll-bottom-btn" id="scrollBottom" title="Scroll to Bottom">
            â†“
        </button>
    </div>
</body>
</html>
